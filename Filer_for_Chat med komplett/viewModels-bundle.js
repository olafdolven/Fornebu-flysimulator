define("knockout",[],(function(){return ko})),function(e,t){"function"==typeof define&&define.amd?define("ksc-focus-on-element",["knockout"],t):"object"==typeof module&&module.exports?module.exports=t(require("knockout")):t(e.ko)}(this,(function(e){"use strict";function t(e){if(e.focus)try{e.focus()}catch(e){}}e.bindingHandlers.focusOnElement={init:function(n,o){var i=o();e.utils.unwrapObservable(i)&&setTimeout((function(){t(n),e.isObservable(i)&&i(!1)}),1)},update:function(n,o){var i=o();e.utils.unwrapObservable(i)&&(t(n),e.isObservable(i)&&i(!1))}}})),function(e,t){"function"==typeof define&&define.amd?define("ksc-concurrency-protector",[],t):"object"==typeof module&&module.exports?module.exports=t():e.concurrencyProtector=t()}(this,(function(){"use strict";return function(e,t){var n=e+".lock";function o(){localStorage[n]||(localStorage[n]=!0,t(),i&&clearInterval(i),localStorage.removeItem(n))}if(localStorage[n])var i=setInterval(o,50);else o()}})),define("JScript/Common/gaAddToCartService",[],(function(){return{trackRemovedFromCart:function(e){dataLayer.push({event:"removeFromCart",ecommerce:{remove:{products:[e]}}})},trackAddedToCart:function(e,t){dataLayer.push({event:"addToCart",ecommerce:{currencyCode:t,add:{products:[e]}}})},formatPrice:function(e){return parseFloat(e).toString()}}})),define("komplett-pubsub",[],(function(){function e(e,t,n){t.forEach((function(e){e.apply(e,n)}))}function t(e,t,n){if(!n)throw new Error("Subscriber to event "+e+" must be a function, but was "+n);var o=t.indexOf(n);return o<0&&t.push(n),o<0}function n(e,t,n){var o=t.indexOf(n);return o>=0&&t.splice(o,1),o>=0}function o(e,t){if(!e.__disposeList__)if(e.__disposeList__=[],e.dispose){var n=e.dispose;e.dispose=function(){n.call(this),e.__disposeList__.forEach((function(e){e()}))}}else e.dispose=function(){e.__disposeList__.forEach((function(e){e()}))};e.__disposeList__.push(t)}function i(i,s){s.subscribers=[],s.subscribeSubscribers=[],s.unsubscribeSubscribers=[];var r=function(){1==arguments.length&&"function"==typeof arguments[0]?r.subscribeTo(arguments[0]):r.publish.apply(null,arguments)};return r.subscribeTo=function(n){return t(i,s.subscribers,n)&&e(0,s.subscribeSubscribers,[function(){n.apply(n,arguments)}]),{autoDispose:function(e){o(e,(function(){r.dont(n)}))}}},r.subscribeTo.onlyOnce=function(e){r.subscribeTo((function t(){e.apply(this,arguments),r.unsubscribeFrom(t)}))},r.publish=function(){e(0,s.subscribers,arguments)},r.dont=function(t){n(0,s.subscribers,t)&&e(0,s.unsubscribeSubscribers)},r.unsubscribeFrom=r.dont,r.isSubscribedTo=function(e){return t(i+".isSubscribedTo",s.subscribeSubscribers,e),{autoDispose:function(t){o(t,(function(){r.isSubscribedTo.dont(e)}))}}},r.isSubscribedTo.dont=function(e){n(0,s.subscribeSubscribers,e)},r.isUnsubscribedFrom=function(e){return t(i+".isUnsubscribedFrom",s.unsubscribeSubscribers,e),{autoDispose:function(t){o(t,(function(){r.isUnsubscribedFrom.dont(e)}))}}},r.isUnsubscribedFrom.dont=function(e){n(0,s.unsubscribeSubscribers,e)},r.toString=function(){return"[Event "+i+"]"},r}return{extend:function(e){for(var t in e)e[t]=i(t,e[t]);return e},create:function(e,t){return t?i(e,t):i("anonymous event",e)}}})),function(e){"function"==typeof define&&define.amd?define("ksc-ko-extenders",["knockout"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){void 0===n&&(n="undefined"!=typeof window?require("knockout"):require("knockout")(t)),e(n)}:e(ko)}((function(e){"use strict";e.subscribable.fn.throttledSubscribe=function(t,n){var o=n,i=t;n||(o=t,i=1);var s=this,r=!1;s.disregardNextUpdate=function(){r=!0},s.updateWithoutNotifyingSubscriber=function(e){s()!==e&&(r=!0,s(e))},e.computed(s).extend({throttle:i}).subscribe((function(e){!1===r?o(e):r=!1}))},e.subscribable.fn.throttleFalsing=function(t){var n=this,o=e.computed(n).extend({throttle:t});return e.computed((function(){return n()||o()}))},e.observableArray.fn.replaceWithDiff=function(e,t,n,o){var i=this().map(t);this(e.map(function(e){var s=i.indexOf(t(e));if(s>=0){var r=this()[s];return n(r,e),r}return o(e)}.bind(this)))}})),define("ksc-breakpoint-notifier/events",["komplett-pubsub"],(function(e){return e.extend({isXs:function(e){},isSm:function(e){},isMd:function(e){},isLg:function(e){},screenSizeChanged:function(e){}})})),define("ksc-breakpoint-notifier/ScreenSize",(function(){return function(e){var t=e?{screenXs:480,screenSm:600,screenMd:992,screenLg:1300}:{screenXs:1,screenSm:2,screenMd:3,screenLg:1e4};this.isXs=function(){return!!window.matchMedia&&window.matchMedia("screen and (max-width: "+(t.screenSm-1)+"px)").matches},this.isSm=function(){return!!window.matchMedia&&window.matchMedia("screen and (min-width: "+t.screenSm+"px) and (max-width: "+(t.screenMd-1)+"px)").matches},this.isMd=function(){return!window.matchMedia||window.matchMedia("screen and (min-width: "+t.screenMd+"px) and (max-width: "+(t.screenLg-1)+"px)").matches},this.isLg=function(){return!!window.matchMedia&&window.matchMedia("screen and (min-width: "+t.screenLg+"px)").matches}}})),define("ksc-breakpoint-notifier/ViewModel",["knockout","ksc-breakpoint-notifier/events","ksc-breakpoint-notifier/ScreenSize"],(function(e,t,n){return function(o){var i=this,s="xs",r="sm",a="md",c="lg",u=new n(o.fullResponsive),l=function(){return u.isLg()?c:u.isMd()?a:u.isSm()?r:s};this.state=e.observable(l());var d={lg:e.observable(),md:e.observable(),sm:e.observable(),xs:e.observable()};d.lg.subscribe((function(e){t.isLg.publish(e)})),d.md.subscribe((function(e){t.isMd.publish(e)})),d.sm.subscribe((function(e){t.isSm.publish(e)})),d.xs.subscribe((function(e){t.isXs.publish(e)})),t.screenSizeChanged.isSubscribedTo((function(e){e(i.state(),!1)})),i.state.subscribe((function(e){t.screenSizeChanged.publish(e)}));var p=function(e){e==c?(d.lg(!0),d.md(!1),d.sm(!1),d.xs(!1)):e==a?(d.lg(!1),d.md(!0),d.sm(!1),d.xs(!1)):e==r?(d.lg(!1),d.md(!1),d.sm(!0),d.xs(!1)):(d.lg(!1),d.md(!1),d.sm(!1),d.xs(!0))};i.state.subscribe(p),p(i.state()),t.isLg.isSubscribedTo((function(e){i.state()==c?e(!0):e(!1)})),t.isMd.isSubscribedTo((function(e){i.state()==a?e(!0):e(!1)})),t.isSm.isSubscribedTo((function(e){i.state()==r?e(!0):e(!1)})),t.isXs.isSubscribedTo((function(e){i.state()==s?e(!0):e(!1)})),$(window).resize((function(){i.state(l())}))}})),define("ksc-breakpoint-notifier",["ksc-breakpoint-notifier/ViewModel","ksc-breakpoint-notifier/events"],(function(e,t){return{init:function(t){t={fullResponsive:void 0!==t.fullResponsive&&t.fullResponsive},new e(t)},events:t}})),define("PageDependentComponents/MultiLevelNavigation/events",["komplett-pubsub"],(function(e){return e.extend({multiLevelNavigationIsOpen:function(e){}})})),define("Layout/events",["komplett-pubsub"],(function(e){return e.extend({disableScrolling:function(e){},megaMobileNavOpen:function(e){}})})),define("Components/LoginButton/events",["komplett-pubsub"],(function(e){return e.extend({focusChanged:function(e){},userLogout:function(){},crmLoggedOut:function(){}})})),define("ksc-ubo/events",["komplett-pubsub"],(function(e){return e.extend({uboOpened:function(){},uboClosed:function(){}})})),define("ksc-ubo/UboViewModel",["knockout","ksc-ubo/events","ksc-breakpoint-notifier"],(function(e,t,n){return function(t,o){var i=this;this.id=t.getNewId(),this.contentViewModel=o.contentViewModel,this.actionElement=o.actionElement,this.topLeft=e.observable(),this.header=o.header||"",this.isOkCancelDialog=o.isOkCancelDialog||!1,this.htmlOutput=e.observable(),this.rendered=e.observable(!1),this.contentRendered=e.observable(!1),this.componentId="ubo-content-"+i.id,this.uboService=t,this.zIndex=t.getLatestZIndex(),this.open=e.observable(!0),this.screenIsXs=e.observable(!1),this.hasActionElement=e.observable(!0),this.neverOpenUpwards=o.neverOpenUpwards,this.uboClasses=e.computed((function(){var e=o.uboClass;return i.hasActionElement()||(e?e+=" centerUbo":e="centerUbo"),e}),this),this.close=function(){i.open(!1),t.closeSpecific(i)},this.closeOnBackgroundClick=function(){i.isOkCancelDialog||i.close()},this.closeLatest=function(){t.closeLatest()},this.htmlOutput.subscribe((function(t){t&&e.components.register(i.componentId,{viewModel:function(){i.screenIsXs()||e.bindingHandlers.uboKeyTrap.renderedHandler();try{return new i.contentViewModel}catch(e){return i.contentViewModel}},template:t})})),n.events.isXs.subscribeTo((function(e){i.screenIsXs(e)}))}})),define("ksc-ubo/UboContentModel",(function(){return function(){this.header=null,this.contentViewModel=null,this.uboClass=null,this.actionElement=null,this.backgroundOverlay=!0,this.maxWidth=null,this.maxHeight=null,this.neverOpenUpwards=!1}})),define("jquery",[],(function(){return $})),define("ksc-ubo/UboSyncContentModel",["jquery","ksc-ubo/UboContentModel"],(function(e,t){return function(){e.extend(this,new t),this.content=null}})),define("ksc-ubo/UboOkCancelViewModel",["jquery","ksc-ubo/UboViewModel"],(function(e,t){return function(n,o){var i=this;e.extend(this,new t(n,o)),this.acceptCallback=o.acceptCallback,this.cancelCallback=o.cancelCallback,this.acceptButtonString=o.acceptButtonString,this.cancelButtonString=o.cancelButtonString,this.cancel=function(){i.cancelCallback&&i.cancelCallback(),n.closeSpecific(i)},this.accept=function(){i.acceptCallback(),n.closeSpecific(i)}}})),define("ksc-ubo/uboService",["jquery","knockout","ksc-ubo/UboViewModel","ksc-ubo/UboOkCancelViewModel","ksc-ubo/events"],(function(e,t,n,o,i){return new function(){var s=this,r=0;this.lastDeletedVm=null,this.ubos=t.observableArray([]),this.uboClass=t.observable("ubo");var a='<div class="throbber"><svg class="circular"><circle class="path" cx="15" cy="15" r="12"/></svg></div>',c=function(t,n){var o=setTimeout((function(){}),500);e.get(t).then((function(e){clearTimeout(o),n(e)}))},u=function(){0==s.ubos().length&&i.uboOpened.publish()};this.createUbo=function(e,t){var o=new n(s,t);u(),o.htmlOutput(e),null==t.actionElement&&o.hasActionElement(!1),s.ubos.push(o),t.uboClass?s.uboClass(t.uboClass+" ubo"):s.uboClass("ubo"),o.rendered(!0)},this.getNewId=function(){return r++},this.getLatestZIndex=function(){return 27640+r},this.openAsync=function(e){s.createUbo(e.loader||a,{actionElement:e.actionElement,uboClass:e.uboClass});c(e.url,(function(t){s.closeLatest(),s.createUbo(t,e)}))},this.openSync=function(e){s.createUbo(e.content,e)},this.openOKCancelSync=function(e){var t=new o(s,e);u(),t.htmlOutput(e.content),s.ubos.push(t)},this.openOKCancelAsync=function(e){s.createUbo(e.loader||a,{actionElement:e.actionElement,uboClass:e.uboClass});c(e.url,(function(t){s.closeLatest(),e.content=t,s.openOKCancelSync(e)}))},this.closeLatest=function(){var e=s.ubos()[s.ubos().length-1];s.closeSpecific(e)},this.closeAllUbos=function(){for(var e=s.ubos().length;e>0;e--){var t=s.ubos()[s.ubos().length-1];s.closeSpecific(t)}},this.closeSpecific=function(e){1==s.ubos().length&&i.uboClosed.publish(),e&&(s.lastDeletedVm=e,s.ubos.remove(e),t.components.unregister(e.componentId),e.actionElement&&e.actionElement.focus())}}})),define("ksc-ubo/UboOKCancelContentModel",["jquery","ksc-ubo/UboSyncContentModel"],(function(e,t){return function(){e.extend(this,new t),this.isOkCancelDialog=!0,this.acceptCallback=null,this.cancelCallback=null,this.acceptButtonString=null,this.cancelButtonString=null}})),define("ksc-ubo/UboAsyncContentModel",["jquery","ksc-ubo/UboContentModel"],(function(e,t){return function(){e.extend(this,new t),this.url=null}})),define("ksc-ubo",["ksc-ubo/events","ksc-ubo/UboAsyncContentModel","ksc-ubo/UboContentModel","ksc-ubo/UboOKCancelContentModel","ksc-ubo/UboOkCancelViewModel","ksc-ubo/uboService","ksc-ubo/UboSyncContentModel","ksc-ubo/UboViewModel"],(function(e,t,n,o,i,s,r,a){return{events:e,uboAsyncContentModel:t,uboContentModel:n,uboOkCancelContentModel:o,uboOkCancelViewModel:i,uboService:s,uboSyncContentModel:r,uboViewModel:a}})),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require(void 0),require(void 0),require(void 0),require(void 0),require(void 0),require(void 0),require(void 0),require(void 0),require(void 0),require(void 0),require(void 0)):"function"==typeof define&&define.amd?define("komplett-chat",["knockout","jquery","ksc-focus-on-element","ksc-ubo","Components/LoginButton/events","Layout/events","PageDependentComponents/MultiLevelNavigation/events","ksc-breakpoint-notifier","ksc-concurrency-protector","ksc-ko-extenders","komplett-pubsub"],t):"object"==typeof exports?exports.komplettChat=t(require("knockout"),require("jquery"),require("ksc-focus-on-element"),require(void 0),require(void 0),require(void 0),require(void 0),require(void 0),require("ksc-concurrency-protector"),require(void 0),require("komplett-pubsub")):e.komplettChat=t(e.ko,e.$,e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0])}(this,(function(e,t,n,o,i,s,r,a,c,u,l){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=55)}([function(t,n){t.exports=e},function(e,t,n){"use strict";var o;t.a={get:function(){return o||{}},set:function(e){o=e}}},function(e,n){e.exports=t},function(e,t,n){"use strict";var o=n(52),i=n.n(o),s=function(){this.storagePrefix="chat2.drive",this.storage=localStorage,this.isStorageAvailable=this.hasLocalStorage()};s.prototype.chatDrive=function(e,t){if(this.isStorageAvailable){if(void 0===e||"undefined"===e)throw new Error("Invalid storage key");var n=JSON.stringify(t),o=this.fullKey(e);return n&&this.storage&&(this.storage[o]=n),JSON.parse(this.storage[o]||null)||null}return null},s.prototype.hasLocalStorage=function(){try{return this.storage.setItem("0","0"),this.storage.removeItem("0"),!0}catch(e){return!1}},s.prototype.set=function(e,t){this.chatDrive(e,t)},s.prototype.get=function(e){return this.chatDrive(e)},s.prototype.remove=function(e){this.storage.removeItem(this.fullKey(e))},s.prototype.addMessage=function(e,t,n){var o=this;i()(this.storagePrefix,(function(){var i=o.get(e)||[];n&&!i[t.sequenceNumber]&&n(),i[t.sequenceNumber]=t,o.set(e,i)}))},s.prototype.clearMessages=function(e){this.remove(e,null),localStorage.removeItem(this.storagePrefix+".lock")},s.prototype.fullKey=function(e){return this.storagePrefix+"."+e},t.a=new s},function(e,t,n){"use strict";var o=n(54),i=n.n(o);t.a=i.a.extend({newMessage:function(e){}})},function(e,t,n){"use strict";var o;t.a={get:function(){return o||{}},set:function(e){o=e}}},function(e,t,n){"use strict";t.a={client:"client",support:"support",system:"system"}},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(29),i=n(39);n.n(i),"loading"!==document.readyState?n.i(o.a)():document.addEventListener("DOMContentLoaded",o.a)},function(e,t,n){"use strict";t.a={participantStateChanged:"participantStateChanged",active:"active",newMessage:"newMessage",text:"text",disconnected:"disconnected",url:"url",typingIndicator:"typingIndicator"}},function(e,t,n){"use strict";function o(){this.type="",this.sequenceNumber="",this.message="",this.name="",this.time=""}t.a=function(e,t){var i=this;this.welcomeMessage="",this.onChatOpen=e,this.onChatExit=t,this.exitInProgress=!1,this.getWelcomeMessage=function(e){return i.welcomeMessage.replace("{navn}",e)},this.getUrlByVerb=function(e){return p.url+e},this.initStorage=function(){a.a.set(h.messages,{})},this.onTypingIndicatorHandler=null,this.onTypingIndicator=function(e){i.onTypingIndicatorHandler=e},this.start=function(e,t,n,o){var r=setTimeout(t,f.smallDelay),a=setTimeout(n,f.longDelay);i.initStorage(),s.a.ajax({type:"POST",contentType:"application/json",url:i.getUrlByVerb("start"),dataType:"json",data:JSON.stringify({topicName:o}),success:function(t){clearTimeout(r),clearTimeout(a),i.setChatStatus(t.chat),e()},processData:!1})},this.poll=function(e,t){return setTimeout((function(){var n=i.getParticipantIdClient();n&&!i.exitInProgress?s.a.ajax({dataType:"json",url:i.getUrlByVerb("poll")+"/"+n,success:t,error:function(){return i.poll(e,t)}}):i.exit()}),e)},this.sendTypingState=function(e){var t=this,n=this.getParticipantIdClient();n&&s.a.ajax({type:"POST",dataType:"json",processData:!1,contentType:"application/json",url:this.getUrlByVerb("setTypingState")+"/"+n,data:JSON.stringify({typingIndicator:e}),success:function(e){"success"===e.chat.status.type&&t.saveChatEvents(e.chat.events)}})};var m=function(e){var t=e.participantID,n=t!==i.getParticipantIdClient();switch(n&&e.participantName&&i.setAgentName(e.participantName),e.state){case r.a.active:n&&!i.isConnectedSupport()&&(function(e){var t=new o;t.type=u.a.support,t.sequenceNumber=e.sequenceNumber,t.message=i.getWelcomeMessage(e.participantName),i.setAgentName(e.participantName),i.addMessage(t)}(e),i.setIsActiveChat(!0),i.setIsConnectedSupport(!0),i.setParticipantIdSupport(t));break;case r.a.disconnected:i.setIsActiveChat(!1)}};this.saveChatEvents=function(e){i.exitInProgress||e.forEach((function(e){switch(e.type){case r.a.participantStateChanged:m(e);break;case r.a.text:case r.a.url:!function(e){var t=new o;t.sequenceNumber=e.sequenceNumber,t.message=e.value;var n=e.participantID;"Agent"===e.participantType&&(i.setParticipantIdSupport(n),i.setAgentName(e.participantName)),n===p.participantIDforChatServer?(t.type=u.a.system,t.message===p.chatOpenSystemMessage?i.onChatOpen&&(i.onChatOpen(),i.setIsActiveChat(!0)):t.message===p.chatClosedSystemMessage?i.setClosedChat(!0):i.addMessage(t)):n===i.getParticipantIdSupport()?(t.type=u.a.support,t.name=e.participantName,i.addMessage(t)):n===i.getParticipantIdClient()&&(t.type=u.a.client,t.name=e.participantName,i.addMessage(t)),c.a.newMessage.publish(t)}(e);break;case r.a.typingIndicator:e.participantID!==i.getParticipantIdClient()&&(i.setTypingIndicator(e.value),i.onTypingIndicatorHandler(e.value,i.getAgentName()))}}))},this.exit=function(){var e=i.getParticipantIdClient();e?(i.exitInProgress=!0,s.a.ajax({type:"POST",contentType:"text/plain",url:i.getUrlByVerb("exit")+"/"+e,data:{nulldataforpost:"0"},success:function(){i.onChatExit(),i.exitInProgress=!1}})):(i.onChatExit(),i.exitInProgress=!1),a.a.clearMessages(h.messages),i.setChatStatus(null),i.setIsActiveChat(!1),i.setIsOpenChat(!1),i.setTypingIndicator(!1),i.setAgentName(null)},this.getMessages=function(){var e=a.a.get(h.messages);return e?Object.keys(e).map((function(t){return e[t]})):[]},this.addMessage=function(e){e.name||(e.name=""),e.time||(e.time=n.i(l.a)(new Date)),e.message=n.i(d.a)(e.message),a.a.addMessage(h.messages,e,(function(){e.type!==u.a.client&&i.setNumberOfUnreadMessages(i.getNumberOfUnreadMessages()+1)}))},this.sendMessage=function(e,t,n,o){var r=setTimeout(n,f.smallDelay),a=setTimeout(o,f.longDelay);s.a.ajax({type:"POST",contentType:"application/json",url:i.getUrlByVerb("sendMessage")+"/"+i.getParticipantIdClient(),data:JSON.stringify({message:e,contentType:p.sendContentType}),success:function(e){clearTimeout(r),clearTimeout(a),t(e)},processData:!1})},this.getParticipantIdClient=function(){return(this.getChatStatus()||{}).participantID},this.setParticipantIdSupport=function(e){a.a.set(h.participantIdSupport,e)},this.getParticipantIdSupport=function(){return a.a.get(h.participantIdSupport)},this.setIsConnectedSupport=function(e){a.a.set(h.isConnectedSupport,e)},this.setIsOpenChat=function(e){a.a.set(h.isOpenChat,e)},this.getIsOpenChat=function(){return a.a.get(h.isOpenChat)},this.setChatStatus=function(e){a.a.set(h.chatStatus,e)},this.getChatStatus=function(){return a.a.get(h.chatStatus)},this.setNumberOfUnreadMessages=function(e){a.a.set(h.unreadMessages,e)},this.getNumberOfUnreadMessages=function(){return a.a.get(h.unreadMessages)},this.setClosedChat=function(e){a.a.set(h.closedChat,e)},this.getClosedChat=function(){return a.a.get(h.closedChat)},this.setScrollPosition=function(e){a.a.set(h.scrollPosition,e)},this.getScrollPosition=function(){a.a.get(h.scrollPosition)},this.setDraft=function(e){a.a.set(h.draft,e)},this.getDraft=function(){return a.a.get(h.draft)},this.deleteStorage=function(){Object.keys(h).forEach((function(e){a.a.remove(e)}))},this.isConnectedSupport=function(){return a.a.get(h.isConnectedSupport)},this.setIsActiveChat=function(e){return a.a.set(h.isActiveChat,e)},this.getIsActiveChat=function(){return a.a.get(h.isActiveChat)},this.setHasBeenDisconnected=function(e){a.a.set(h.hasBeenDisconnected,e)},this.hasBeenDisconnected=function(){a.a.get(h.hasBeenDisconnected)},this.setTypingIndicator=function(e){a.a.set(h.typingIndicator,e)},this.getTypingIndicator=function(){a.a.get(h.typingIndicator)},this.setCustomerTyping=function(e){a.a.set(h.customerTyping,e),i.sendTypingState(e)},this.getCustomerTyping=function(){a.a.set(h.customerTyping)},this.setAgentName=function(e){a.a.set(h.agentName,e)},this.getAgentName=function(){return a.a.get(h.agentName)},this.hasLocalStorage=function(){return a.a.hasLocalStorage()}};var i=n(2),s=n.n(i),r=n(10),a=n(3),c=n(4),u=n(6),l=n(31),d=n(32),p={url:"/chat/service/chat/",sendContentType:"text/plain",participantIDforChatServer:"00000000-0000-0000-0000-000000000000",chatOpenSystemMessage:"open",chatClosedSystemMessage:"closed"},h={messages:"messages",chatStatus:"chatStatus",isConnectedSupport:"isConnectedSupport",participantIdSupport:"participantIdSupport",outGoingMessage:"outGoingMessage",isActiveChat:"isActiveChat",hasBeenDisconnected:"hasBeenDisconnected",isOpenChat:"isOpenChat",unreadMessages:"unreadMessages",closedChat:"closedChat",draft:"draft",typingIndicator:"typingIndicator",customerTyping:"customerTyping",agentName:"agentName",scrollPosition:"scrollPosition"},f={smallDelay:5e3,longDelay:2e4}},function(e,t,n){"use strict";t.a=function(e,t,n){var d=this;this.welcomeMessage="",this.onChatOpen=e,this.onChatExit=t,this.storeInfo=n,this.exitInProgress=!1,this.l10n=i.a.get(),r.welcomeMessage=this.l10n["chat.customer.welcomeMessage.withoutName"],r.onlineSchedules=[{day:this.l10n["chat.openConfig.carefulChanging.day"],time:this.l10n["chat.openConfig.carefulChanging.time"],city:"Europe/Berlin"},{date:parseInt(this.l10n["chat.openConfig.carefulChanging.dayOfMonth.extra"],10),month:parseInt(this.l10n["chat.openConfig.carefulChanging.month.extra"],10),time:this.l10n["chat.openConfig.carefulChanging.time.extra"],city:"Europe/Berlin"}],this.getQueuePrefix=function(){switch(d.storeInfo.environment){case"Development":return"dev_";case"Test":return"test_";default:return d.storeInfo.country+" "}},this.getQueue=function(){return d.getQueuePrefix()+"DC"+d.storeInfo.vtweg+"_Chat"},this.getUserName=function(){var e=d.storeInfo.userName+" - "+d.storeInfo.accountId;return d.storeInfo.isBeta&&(e+=" - "+d.l10n["beta.customercenter.message"]),0!==d.storeInfo.accountId?e:d.l10n["chat.user.anonymous"]},this.onTypingIndicatorHandler=null,this.onTypingIndicator=function(e){d.onTypingIndicatorHandler=e},this.start=function(e){d.loadPurecloudScript((function(){(window.ININ||{}).webchat.create(r).then(d.connectToPurecloud(e))}))},this.createChat=function(){if(window.PURECLOUD_WEBCHAT_FRAME_CONFIG={containerEl:s},r.queueName=d.getQueue(),d.getIsActiveChat()){d.loadPurecloudScript((function(){(window.ININ||{}).webchat.create(r).then(d.reconnectToPurecloud)}))}},this.connectToPurecloud=function(e){return function(t){d.onChatOpen(),t.getConfig().setData({firstName:d.getUserName(),customerId:d.storeInfo.accountId}),t.chatStarted=function(){d.setIsActiveChat(!0),e()},t.chatEnded=function(){document.getElementById(s).innerHTML="",d.exit()},t.isAutoJoined()||setTimeout((function(){t.data.chatAvailable?t.renderFrame({containerEl:s}):d.exit()}),u)}},this.reconnectToPurecloud=function(e){e.getConfig().setData({firstName:d.getUserName(),customerId:d.storeInfo.accountId}),e.chatEnded=function(){document.getElementById(s).innerHTML="",d.exit()},!e.isAutoJoined()&&d.getIsActiveChat()&&d.exit()},this.loadPurecloudScript=function(e){if(c||l>0||navigator.userAgent.match(/Trident.*rv:11\./))e();else{var t=document.createElement("script");t.type="text/javascript",t.id="purecloud-webchat-js",t.async=!0,t.src="/js/purecloudChat.js",t.setAttribute("region","eu-west-1"),t.setAttribute("org-guid","03ca536f-9637-4e11-85f4-eb35a522e027"),t.setAttribute("deployment-key","14aa397c-40a8-4e52-875a-140ae5545835"),t.addEventListener("load",(function(){c=!0,e()}),!1),document.head.appendChild(t)}},this.poll=function(){return{}},this.sendTypingState=function(){},this.saveChatEvents=function(){},this.exit=function(){d.onChatExit(),d.exitInProgress=!1,d.setChatStatus(null),d.setIsActiveChat(!1),d.setIsOpenChat(!1),d.setTypingIndicator(!1),d.setAgentName(null)},this.getMessages=function(){return[]},this.addMessage=function(){},this.sendMessage=function(){},this.getParticipantIdClient=function(){return(this.getChatStatus()||{}).participantID},this.setParticipantIdSupport=function(e){o.a.set(a.participantIdSupport,e)},this.getParticipantIdSupport=function(){return o.a.get(a.participantIdSupport)},this.setIsConnectedSupport=function(e){o.a.set(a.isConnectedSupport,e)},this.setIsOpenChat=function(e){o.a.set(a.isOpenChat,e)},this.getIsOpenChat=function(){return o.a.get(a.isOpenChat)},this.setChatStatus=function(e){o.a.set(a.chatStatus,e)},this.getChatStatus=function(){return o.a.get(a.chatStatus)},this.setNumberOfUnreadMessages=function(e){o.a.set(a.unreadMessages,e)},this.getNumberOfUnreadMessages=function(){return o.a.get(a.unreadMessages)},this.setClosedChat=function(e){o.a.set(a.closedChat,e)},this.getClosedChat=function(){return o.a.get(a.closedChat)},this.setScrollPosition=function(e){o.a.set(a.scrollPosition,e)},this.getScrollPosition=function(){o.a.get(a.scrollPosition)},this.setDraft=function(e){o.a.set(a.draft,e)},this.getDraft=function(){return o.a.get(a.draft)},this.deleteStorage=function(){Object.keys(a).forEach((function(e){o.a.remove(e)}))},this.isConnectedSupport=function(){return o.a.get(a.isConnectedSupport)},this.setIsActiveChat=function(e){return o.a.set(a.isActiveChat,e)},this.getIsActiveChat=function(){return o.a.get(a.isActiveChat)},this.setHasBeenDisconnected=function(e){o.a.set(a.hasBeenDisconnected,e)},this.hasBeenDisconnected=function(){o.a.get(a.hasBeenDisconnected)},this.setTypingIndicator=function(e){o.a.set(a.typingIndicator,e)},this.getTypingIndicator=function(){o.a.get(a.typingIndicator)},this.setCustomerTyping=function(e){o.a.set(a.customerTyping,e),d.sendTypingState(e)},this.getCustomerTyping=function(){o.a.set(a.customerTyping)},this.setAgentName=function(e){o.a.set(a.agentName,e)},this.getAgentName=function(){return o.a.get(a.agentName)},this.hasLocalStorage=function(){return o.a.hasLocalStorage()},this.createChat()};var o=n(3),i=n(1),s="purecloud-chat-container",r={webchatAppUrl:"https://apps.mypurecloud.ie/webchat",webchatServiceUrl:"https://realtime.mypurecloud.ie:443",orgId:"9488",orgName:"komplettservicesas",queueName:"NO DC10_Chat",logLevel:"ERROR",locale:"no",showSubmitButton:!0,reconnectEnabled:!0,data:{},companyLogo:{width:190,height:38,url:"https://www.komplett.no/mlf/skins/komplettno/logo/prod/logo_touch.png"},companyLogoSmall:{width:25,height:25,url:"https://www.komplett.no/mlf/skins/komplettno/logo/prod/package.png"},agentAvatar:{width:38,height:38,url:"https://www.komplett.no/mlf/skins/komplettno/logo/prod/package.png"},welcomeMessage:"",cssClass:"purecloud-chat",chatNowElement:s},a={messages:"messages",chatStatus:"chatStatus",isConnectedSupport:"isConnectedSupport",participantIdSupport:"participantIdSupport",outGoingMessage:"outGoingMessage",isActiveChat:"isActiveChat",hasBeenDisconnected:"hasBeenDisconnected",isOpenChat:"isOpenChat",unreadMessages:"unreadMessages",closedChat:"closedChat",draft:"draft",typingIndicator:"typingIndicator",customerTyping:"customerTyping",agentName:"agentName",scrollPosition:"scrollPosition",chatQueue:"chatQueue"},c=!1,u=750,l=window.navigator.userAgent.indexOf("MSIE ")},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\.\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-]*)?\??(?:[\-\+=&;%@\.\w]*)#?(?:[\.\!:\/\\\w]*))?)/g,r=/.*@.*/g;i.a.bindingHandlers.UrlAndBreakify={update:function(e,t){var n=i.a.utils.unwrapObservable(t()),o=(n=n.replace(/\n/g,"<br />")).replace(s,(function(e,t,n,o){var i=new RegExp("(http(s)?://)?"+location.host),s=function(e,t){return t?"":r.test(e)?"mailto:":"http://"}(e,o)+e;return"<a "+(i.test(e)?"":'target="_blank" rel="noopener"')+' href="'+s+'">'+e+"</a>"}));e.innerHTML=o}}},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(2),r=n.n(s);i.a.bindingHandlers.bindOnKey={init:function(e,t){var n=i.a.utils.unwrapObservable(t());r()(e).bind("keypress."+n.name,(function(e){n.keys.indexOf(e.keyCode)>-1&&(n.disableOnShiftKey&&e.shiftKey||n.do(e))}))}}},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(2),r=n.n(s);i.a.bindingHandlers.calculateScroller={update:function(e,t,n){var o=t();if(o()){var i=r()(e),s=n().shouldUpdateScroller,a=i.scrollTop()+i.outerHeight(),c=e.scrollHeight;c<a+15&&c>a-15&&s(!0)}o(!1)}}},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(2),r=n.n(s);i.a.bindingHandlers.onScrollToBottom={update:function(e,t){var n=r()(e),o=t();n.scroll((function(){var t=n.scrollTop()+n.outerHeight(),i=e.scrollHeight;i<t+15&&i>t-15&&o()}))}}},function(e,t,n){"use strict";function o(e,t){var n=t()?"0":"-1";e.setAttribute("tabindex",n)}var i=n(0);n.n(i).a.bindingHandlers.tabbable={init:o,update:o}},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(2),r=n.n(s);i.a.bindingHandlers.updateScroller={update:function(e,t,n){var o=t(),i=n().shouldUpdateScroller;o()&&(r()(e).scrollTop(e.scrollHeight),i(!1))}}},function(e,t,n){"use strict";var o=n(0);n.n(o).a.bindingHandlers.watchScrollPosition={update:function(e,t){e.addEventListener("scroll",(function(){t()(e.scrollTop)}))}}},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(33),r=n(40),a=n.n(r);i.a.components.register("chat-component",{viewModel:{createViewModel:function(){return new s.a}},template:a.a})},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(41),r=n.n(s),a=n(1);n(14),i.a.components.register("chat-controls",{viewModel:function(e){var t=this;this.outgoing=e.outgoing,this.sendMessage=function(){var n=t.outgoing.message().trim();n&&e.sendMessage(n)},this.exitClick=e.exitClick,this.isActive=e.isActive,this.focus=e.focus,this.sendOnEnter={name:"sendMessageOnEnter",do:function(e){t.sendMessage(),e.preventDefault()},keys:[13],disableOnShiftKey:!0},this.l10n=a.a.get()},template:r.a})},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(42),r=n.n(s),a=n(1);i.a.components.register("chat-header",{viewModel:function(e){var t=this;this.toggleChat=e.toggleChat,this.unreadMessages=e.unreadMessages,this.displayUnreadMessageCount=i.a.computed((function(){return t.unreadMessages()>0&&e.hasHidden()})),this.l10n=a.a.get()},template:r.a})},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(43),r=n.n(s),a=n(1),c=n(6);n(13),i.a.components.register("chat-message",{viewModel:function(e){var t=this;this.msg=e.msg,this.l10n=a.a.get(),this.hasMessages=e.hasMessages,this.msgInfo=i.a.computed((function(){var n=e.msg.time,o="";return e.msg.type===c.a.client?o=t.l10n["chat.user.title"]:e.msg.type===c.a.support&&(o=t.l10n["chat.customer.support.title"]),o&&(n+=" - "+o),n}))},template:r.a})},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(44),r=n.n(s),a=n(1);i.a.components.register("chat-spinner",{viewModel:function(e){this.visible=e.visible,this.l10n=a.a.get()},template:r.a})},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(45),r=n.n(s),a=n(1);i.a.components.register("delay-notification",{viewModel:function(e){var t=this;this.delay=e.delay,this.isEstablish=e.isEstablish,this.l10n=a.a.get(),this.msg=i.a.computed((function(){var e=t.delay(),n="";if(e){var o="chat."+e+(t.isEstablish?".establish":"")+".delay.message";n=t.l10n[o]}return n}))},template:r.a})},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(46),r=n.n(s),a=n(1),c=n(7);n.n(c),i.a.components.register("first-connect",{viewModel:function(e){this.isFirstConnect=e.isFirstConnect,this.startChat=e.startChat,this.focus=e.focus,this.l10n=a.a.get()},template:r.a})},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(47),r=n.n(s),a=n(1),c=n(7);n.n(c),i.a.components.register("panel-menu",{viewModel:function(e){this.startChat=e.startChat,this.focus=e.focus,this.l10n=a.a.get(),this.chatInfo=e.chatInfo,this.backClick=e.backClick,this.showStartChat=e.showStartChat,this.showMinSide=e.showMinSide,this.closeChat=function(){return e.toggleChat(),!0}},template:r.a})},function(e,t,n){"use strict";var o=n(2),i=n.n(o);t.a=function(e){var t={},n=e;return"string"==typeof e&&(n=document.querySelector(e)),n&&n.dataset.kChat&&i.a.extend(!0,t,JSON.parse(n.dataset.kChat)),t}},function(e,t,n){"use strict";var o=n(0),i=(n.n(o),n(28)),s=n(1),r=n(5),a=n(53);n.n(a),n(20),t.a=function(e){void 0===e&&(e="[data-k-chat]");var t=document.querySelector(e);t.innerHTML="<chat-component></chat-component>";var o=n.i(i.a)(t);s.a.set(o.l10n),r.a.set(o.initParams)}},function(e,t,n){"use strict";t.a=function(e,t){var n=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(t);if(n.length!==o.length)return!1;for(var i=0;i<n.length;i++){var s=n[i];if(e[s]!==t[s])return!1}return!0}},function(e,t,n){"use strict";var o=/.*(\d{2}:\d{2}:\d{2}).*/;t.a=function(e){return e.toTimeString().replace(o,"$1")}},function(e,t,n){"use strict";t.a=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(11),r=n(12),a=n(4),c=n(30),u=n(1),l=n(5),d=n(34),p=n(35),h=n(36),f=n(37),m=n(38),b=n(8),v=n.n(b),g=n(48),C=n.n(g),y=(n(21),n(22),n(23),n(24),n(25),n(26),n(27),n(19),n(16),n(18),n(15),n(17),600);t.a=function(){var e=this;this.l10n=u.a.get(),this.initParams=l.a.get(),this.onChatOpen=function(){e.showSpinner(!1),e.isActive(!0)},this.onExit=function(){e.showConfirmExitChat(!1),e.disconnected(),e.isOpen(!1),e.outgoing.message(""),e.responsive.enableScroll(),e.messages([]),e.hasBeenDisconnected(!1)};var t=this.initParams.usePureCloudChat||!1;this.headerAndFooter2018=this.initParams.headerAndFooter2018||!1,this.chooseTopicEnabled=this.initParams.orderSpecificChatQueue||!1;var o={};o=t?new r.a(this.onChatOpen,this.onExit,this.initParams.storeInfo):new s.a(this.onChatOpen,this.onExit);var b=null,g=function(){b=b||o.poll(2e3,e.newMessagesHandler)};this.hasLocalStorage=o.hasLocalStorage(),this.numberOfUnreadMessages=i.a.observable(o.getNumberOfUnreadMessages()),this.showConfirmExitChat=i.a.observable(!1),this.showSpinner=i.a.observable(!1),this.messages=i.a.observableArray(o.getMessages()),this.sendingMessage=i.a.observable(!1),this.postDelay=i.a.observable(!1),this.establishDelay=i.a.observable(!1),this.isOpen=i.a.observable(o.getIsOpenChat()),this.isActive=i.a.observable(o.getIsActiveChat()),this.hasBeenDisconnected=i.a.observable(o.hasBeenDisconnected()),this.closedChat=i.a.observable(!1),this.focusOnStartButton=i.a.observable(!1),this.currentPanel=i.a.observable("komplett"),this.showPanelButtons=i.a.computed((function(){return!e.hasBeenDisconnected()&&!e.showSpinner()&&!e.isActive()})),this.chooseTopicEnabled&&this.showPanelButtons()&&this.currentPanel("menu");var S=function(t){return t?e.l10n["chat.agent.typing"].replace("{navn}",t):"..."};this.typingIndicatorLabel=i.a.observable(S(o.getAgentName())),this.typingIndicator=i.a.observable(o.getTypingIndicator()),o.onTypingIndicator((function(t,n){e.typingIndicator(t),e.typingIndicatorLabel(S(n))})),this.mlNavigation=new d.a,this.outgoing=new p.a(o),this.overlayScrolling=new h.a,this.responsive=new f.a(this.isOpen),this.scroller=new m.a(o,(function(t){t&&e.isOpen()&&e.numberOfUnreadMessages(0)})),this.onScrollToBottomHandler=function(){e.isOpen()&&e.numberOfUnreadMessages(0)},this.isOpenAndScrolled=i.a.computed((function(){return e.isOpen()&&e.scroller.isActiveSessionScrolled()})),this.isOpen.subscribe((function(t){e.scroller.calculateScroller(!0),e.scroller.shouldUpdateScroller()&&!t?e.scroller.scrollerIsAtBottom=!0:e.scroller.scrollerIsAtBottom&&t?e.scroller.shouldUpdateScroller(!0):e.scroller.scrollerIsAtBottom=!1})),this.isOpen.subscribe((function(e){e&&o.getIsActiveChat()&&g(),o.setIsOpenChat(e)})),this.isOpen.throttledSubscribe(y,(function(t){t&&(e.outgoing.focus(!0),e.focusOnStartButton(!0),e.scroller.calculateScroller(!0))})),this.hasHiddenMessages=i.a.computed((function(){return e.isOpenAndScrolled()||!e.isOpen()})),this.messages.subscribe((function(){e.scroller.calculateScroller(!0)})),this.hasMessages=i.a.computed((function(){return e.messages().length>0})),this.numberOfUnreadMessages.throttledSubscribe(0,(function(e){o.setNumberOfUnreadMessages(e)})),this.toggleChat=function(){e.isOpen(!e.isOpen())},this.startAfterDisconnect=function(){o.setHasBeenDisconnected(!1),e.hasBeenDisconnected(!1),e.postDelay(!1),e.establishDelay(!1),e.messages([]),e.startChat()};var k=function(){e.establishDelay(!1),e.scroller.isActiveSessionScrolled(!1),"long"!==e.establishDelay()&&g(),e.outgoing.focus(!0)},w=function(){e.establishDelay("small")},I=function(){o.setIsActiveChat(!1),e.establishDelay("long"),e.showSpinner(!1),e.disconnected()};this.startChat=function(){if(e.showSpinner(!0),o.getIsActiveChat())e.syncWithStorage(),e.scroller.resetScrollStatus(),e.showSpinner(!1),g();else{var t="";"order"===e.currentPanel()&&(t="order"),o.start(k,w,I,t)}},this.hasDelays=i.a.computed((function(){return e.establishDelay()||e.postDelay()})),this.isStatusPanelVisible=i.a.computed((function(){return!e.isActive()||e.hasDelays()||e.hasBeenDisconnected()||e.closedChat()||e.typingIndicator()})),this.chatInfoText=i.a.computed((function(){switch(e.currentPanel()){case"order":return e.l10n["chat.infoOrder"];default:return e.l10n["chat.info"]}})),this.showReconnect=i.a.computed((function(){return!(!e.hasBeenDisconnected()||e.isActive()||e.closedChat()||e.showSpinner())})),this.syncWithStorage=function(){o.getChatStatus()&&(e.pullMessages(),e.numberOfUnreadMessages.updateWithoutNotifyingSubscriber(o.getNumberOfUnreadMessages()),e.hasBeenDisconnected(o.hasBeenDisconnected()),e.isActive(o.getIsActiveChat()),e.closedChat(o.getClosedChat()))},this.closedChat.subscribe((function(t){t&&e.disconnected()})),this.isMenuPanel=i.a.computed((function(){return"menu"===e.currentPanel()})),this.isMessagesPanel=i.a.computed((function(){return"menu"!==e.currentPanel()})),this.isRegularPanel=i.a.computed((function(){return"komplett"===e.currentPanel()||"order"===e.currentPanel()})),this.isKomplettPanel=i.a.computed((function(){return"komplett"===e.currentPanel()})),this.isOrderPanel=i.a.computed((function(){return"order"===e.currentPanel()})),this.showPanelButtons=function(){e.currentPanel("menu")},this.chooseKomplettPanel=function(){e.currentPanel("komplett")},this.chooseOrderPanel=function(){e.currentPanel("order")},this.chooseMenuPanel=function(){e.currentPanel("menu")},a.a.newMessage.subscribeTo((function(){e.syncWithStorage()})),this.pullMessages=function(){var t=o.getMessages();String(t)!==String(e.messages())&&t.forEach((function(t){for(var o=!1,i=0,s=e.messages().length;i<s;i++)if(n.i(c.a)(t,e.messages()[i])){o=!0;break}o||e.messages.push(t)}))},this.disconnected=function(){b=null,e.isActive(!1),e.scroller.shouldUpdateScroller(!0),e.showSpinner(!1),e.typingIndicator(!1),o.setIsActiveChat(!1),o.setHasBeenDisconnected(!0),o.setIsConnectedSupport(!1),o.setTypingIndicator(!1),e.chooseTopicEnabled&&e.chooseMenuPanel()},this.exitChat=function(){o.exit()},C.a&&C.a.userLogout.subscribeTo((function(){e.exitChat()})),this.newMessagesHandler=function(t){e.showSpinner(!1);var n=t.chat;"success"===n.status.type?function(t){o.saveChatEvents(t.events),e.syncWithStorage(),o.getIsActiveChat()?b=o.poll(t.pollWaitSuggestion,e.newMessagesHandler):e.disconnected()}(n):"failure"===n.status.type&&e.disconnected()};var P=function(t){e.sendingMessage(!1),e.postDelay(!1),t&&t.chat&&"success"===t.chat.status.type?(o.saveChatEvents(t.chat.events),o.setDraft(""),e.outgoing.message("")):t&&t.chat&&"failure"===t.chat.status.type&&e.disconnected()},O=function(){e.postDelay("small"),e.scroller.shouldUpdateScroller(!0)},x=function(){o.exit(),o.setIsActiveChat(!1),e.sendingMessage(!1),e.postDelay("long"),e.syncWithStorage(),e.disconnected(),e.scroller.shouldUpdateScroller(!0)};this.sendMessage=function(t){e.sendingMessage(!0),o.sendMessage(t,P,O,x)},this.openConfirmExitDlg=function(t,n){var o=new v.a.uboOkCancelContentModel;return o.header=e.l10n["chat.confirmExitDialog.title"],o.content="<div class='chat-close-text'>"+e.l10n["chat.confirmExitDialog.text"]+"</div>",o.acceptButtonString=e.l10n["chat.button.exit"],o.cancelButtonString=e.l10n["cancel.btn"],o.acceptCallback=e.exitChat,o.actionElement=n.target,v.a.uboService.openOKCancelSync(o)},this.init=function(){o.welcomeMessage=e.l10n["chat.customer.support.welcomeMessage"],o.setClosedChat(!1),e.isActive()&&e.startChat(),e.isOpen()&&setTimeout(e.postInitFocus,y)},this.postInitFocus=function(){e.isActive()?e.outgoing.message()?e.outgoing.focus(!1):e.outgoing.focus(!0):e.focusOnStartButton(!0)},this.init()}},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(50),r=n.n(s);t.a=function(){var e=this;this.ariaHidden=i.a.observable(!1),r.a&&r.a.multiLevelNavigationIsOpen.subscribeTo((function(t){e.ariaHidden(t)}))}},function(e,t,n){"use strict";var o=n(0),i=n.n(o);t.a=function(e){var t=this;this.message=i.a.observable(e.getDraft()||""),this.focus=i.a.observable(),this.isTyping=i.a.observable(e.getCustomerTyping()),this.oldMessage="",this.message.throttledSubscribe(250,(function(t){e.setDraft(t)})),this.message.throttledSubscribe(100,(function(e){t.focus()?(t.oldMessage=e,t.isTyping(e.length>0)):e.length>0&&e!==t.oldMessage?(t.isTyping(!0),t.oldMessage=e):(e.trim(),t.isTyping(!1))})),this.isTyping.subscribe((function(){e.setCustomerTyping(t.isTyping())}))}},function(e,t,n){"use strict";var o=n(8),i=n.n(o),s=n(0),r=n.n(s);t.a=function(){var e=this;this.fixIos=r.a.observable(!0),i.a.events.uboOpened.subscribeTo((function(){e.fixIos(!1)})),i.a.events.uboClosed.subscribeTo((function(){e.fixIos(!0)}))}},function(e,t,n){"use strict";var o=n(0),i=n.n(o),s=n(2),r=n.n(s),a=n(51),c=n.n(a),u=n(49),l=n.n(u),d=/iPad|iPhone|iPod/.test(navigator.userAgent);t.a=function(e){var t=this,n=i.a.observable(!1),o=i.a.observable(!1),s=null,a=r()("body");c.a.events.isXs.subscribeTo((function(e){n(e)})),c.a.events.isSm.subscribeTo((function(e){o(e)})),this.displayChatOverlay=i.a.computed((function(){return!(!e()||!(n()||o()||d))})),this.disableScroll=function(){d&&(s=a.scrollTop(),l.a.disableScrolling(!0))},this.enableScroll=function(){d&&(l.a.disableScrolling(!1),a.scrollTop(s))},this.toggleChat=function(){e(!e()),e()?t.disableScroll():t.enableScroll()}}},function(e,t,n){"use strict";var o=n(0),i=n.n(o);t.a=function(e,t){var n=this;this.scrollPosition=i.a.observable(e.getScrollPosition()||0),this.calculateScroller=i.a.observable(!1),this.shouldUpdateScroller=i.a.observable(!1),this.shouldUpdateScroller.subscribe(t),this.scrollerIsAtBottom=!1,this.updateScroller=i.a.computed((function(){return n.shouldUpdateScroller()})).extend({throttle:1}),this.isScrolled=i.a.computed((function(){return n.scrollPosition()>0})),this.isActiveSessionScrolled=i.a.observable(!1),this.resetScrollStatus=function(){n.isScrolled()?n.isActiveSessionScrolled(!0):n.isActiveSessionScrolled(!1)},this.scrollPosition.subscribe((function(){return n.resetScrollStatus()})),this.scrollPosition.subscribe((function(t){return e.setScrollPosition(t)}))}},function(e,t){},function(e,t){e.exports='<div class=chat> <div class="overlay fixed" data-bind="visible: responsive.displayChatOverlay, click: responsive.toggleChat" style=display:none></div> <aside class="chat-wrapper fix-overlay-scrolling-ios" data-bind="visible: hasLocalStorage, css: {\'chat-open\': isOpen, \'active\': isActive, \'fix-overlay-scrolling-ios\': overlayScrolling.fixIos, \'footer-2018\': headerAndFooter2018}, attr: {\'aria-hidden\': mlNavigation.ariaHidden, \'aria-label\': l10n[\'aria.label.chat\']}" aria-role=complimentary> <chat-header params="toggleChat: toggleChat, unreadMessages: numberOfUnreadMessages, hasHidden: hasHiddenMessages"></chat-header> <div class=message-input-wrapper> <div class=communication-panel> <div class=choose-topic-panel data-bind="visible: isMenuPanel"> <div class=chat-welcome data-bind="html: l10n[\'chat.welcomeMenu\']"></div> <div class=menu-option> <button class=btn-medium data-bind="click: chooseOrderPanel, text: l10n[\'chat.menu.questionaboutorder\']"></button> </div> <div class=menu-option> <button class=btn-medium data-bind="click: chooseKomplettPanel, text: l10n[\'chat.menu.questionaboutsomethingelse\']"></button> </div> </div> <div id=purecloud-chat-container data-bind="visible: isActive"></div> <div class="chat-history scroll" id=chat-history aria-live=polite role=log data-bind="\r\n                        tabbable: isOpenAndScrolled,\r\n                        calculateScroller: scroller.calculateScroller,\r\n                        updateScroller: scroller.updateScroller,\r\n                        shouldUpdateScroller: scroller.shouldUpdateScroller,\r\n                        watchScrollPosition: scroller.scrollPosition,\r\n                        onScrollToBottom: onScrollToBottomHandler,\r\n                        visible: isMessagesPanel" tabindex=-1> <div class=chat-welcome data-bind="text: l10n[\'chat.welcomeMessage.byDc\'], visible: isOrderPanel"></div> <div class=chat-welcome data-bind="text: l10n[\'chat.welcomeMessage.byDc\'], visible: isKomplettPanel"></div> \x3c!-- ko foreach: messages --\x3e <chat-message params="msg: $data, hasMessages: $parent.hasMessages()"></chat-message> \x3c!-- /ko --\x3e </div> <div class=chat-status-panel data-bind="visible: isMessagesPanel" style=display:none> <first-connect params="\r\n                        isFirstConnect: (!hasBeenDisconnected() && !showSpinner() && !isActive()),\r\n                        startChat: startChat,\r\n                        focus: focusOnStartButton" data-bind="visible: !chooseTopicEnabled"> </first-connect> <chat-spinner params="visible: showSpinner"></chat-spinner> <div class=chat-closed data-bind="visible: closedChat, html: l10n[\'chat.closed.message\']" style=display:none></div> <delay-notification params="delay: establishDelay, isEstablish: true"></delay-notification> <delay-notification params="delay: postDelay, isEstablish: false"></delay-notification> <chat-reconnect params="showReconnect: showReconnect, startAfterDisconnect: startAfterDisconnect"></chat-reconnect> <div class=chat-typingIndicator data-bind="visible: typingIndicator"> <span class="icon icon-20 fa-darkgrey-pencil"></span> <span data-bind="text: typingIndicatorLabel">...</span> </div> <panel-menu params="\r\n                        startChat: startChat,\r\n                        focus: focusOnStartButton,\r\n                        chatInfo: chatInfoText,\r\n                        backClick: chooseMenuPanel,\r\n                        showStartChat: isRegularPanel,\r\n                        showMinSide : false,\r\n                        toggleChat: toggleChat" data-bind="visible: chooseTopicEnabled && (!hasBeenDisconnected() && !showSpinner() && !isActive())"> </panel-menu> </div> <chat-controls params="isActive: isActive, outgoing: outgoing, sendMessage: sendMessage, exitClick: openConfirmExitDlg" data-bind="visible: !initParams.usePureCloudChat"></chat-controls> </div> </div> </aside> </div>'},function(e,t){e.exports="<div data-bind=\"visible: isActive\" style=display:none> <form data-bind=\"submit: sendMessage\"> <textarea aria-controls=chat-history class=chat-input-textbox required aria-required=true data-bind=\"\r\n            attr: {placeholder: l10n['chat.write.question'], 'aria-label': l10n['chat.write.question']},\r\n            value: outgoing.message,\r\n            valueUpdate: 'input',\r\n            bindOnKey: sendOnEnter,\r\n            focusOnElement: focus\"></textarea> <div class=chat-menu-box> <button class=chat-button-text type=button data-bind=\"click: exitClick, text: l10n['chat.button.exit']\"></button> <button class=\"chat-button-text highlihgted\" type=submit data-bind=\"text: l10n['chat.button.send']\"></button> </div> </form> </div>"},function(e,t){e.exports='<button class=chat-header data-bind="click: toggleChat" tabindex=0> <span class=unread-messages style=display:none data-bind="visible: displayUnreadMessageCount, text: unreadMessages">0</span> <span class=chat-icon> <span class="icon icon-20 fa-white-comment"></span> </span> <span class=chat-header-big-text> <span data-bind="text: l10n[\'chat.header.chatWithUs\']"></span> <span class="icon icon-20 fa-darkgrey-minus-circle pull-right"></span> </span> </button>'},function(e,t){e.exports='<div class=message data-bind="visible: hasMessages" style=display:none> <div class=chat-time-info style=display:none data-bind="visible: msg.message.trim() !== \'\', text: msgInfo"></div> <div class=chat-bubble data-bind="UrlAndBreakify: msg.message, css: \'chat-bubble-\' + msg.type"></div> </div>'},function(e,t){e.exports='<div class=spinner-wrapper style=display:none data-bind="visible: visible"> <img alt=spinner src=/a/i/H/big-ajax-loader.gif /> </div>'},function(e,t){e.exports='<div style=display:none data-bind="visible: delay() !== false, css: (delay() + \'-delay\')"> <span class="icon icon-wait-time-32"></span> <span class=text data-bind="text: msg"></span> </div>'},function(e,t){e.exports='<div class=first-connect data-bind="visible: isFirstConnect" style=display:none> <div class=chat-info data-bind="html: l10n[\'chat.info\']"></div> <button class=chat-menu-button data-bind="click: startChat, focusOnElement: focus, text: l10n[\'chat.button.startChat\']"></button> </div>'},function(e,t){e.exports='<div class=panel-menu> <div class=chat-info data-bind="html: chatInfo"></div> <div class=chat-menu-box> <button class="chat-button-text chat-menu-button" tabindex=0 data-bind="\r\n            click: backClick,\r\n            text: l10n[\'chat.button.goBack\']"> </button> <button class="chat-button-text chat-menu-button highlihgted" tabindex=1 data-bind="\r\n            click: startChat,\r\n            focusOnElement: focus,\r\n            text: l10n[\'chat.button.startChat\'],\r\n            visible: showStartChat"> </button> <a class="chat-button-text chat-menu-button menu-button highlihgted" href=/orders data-bind="click: closeChat, visible: showMinSide, text: l10n[\'chat.button.orders\']"></a> </div> </div> '},function(e,t){e.exports=i},function(e,t){e.exports=s},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t){e.exports=c},function(e,t){e.exports=u},function(e,t){e.exports=l},function(e,t,n){e.exports=n(9)}])})),define("JScript/Common/fastRequire",[],(function(){var e=Object.create(null);function t(e){return e?function(t){e(t.value);var n=Date.now();return n-t.start>150?(t.start=n,new Promise((function(e){window.requestAnimationFrame(e)})).then((function(){return t}))):t}:function(e){return e}}function n(e){return{value:e,start:Date.now()}}function o(e){return e?function(t){return e(t),Promise.reject(t)}:function(e){return Promise.reject(e)}}return function(i,s,r){e[i]=i in e?e[i].then(t(s),o(r)):new Promise((function(e,t){require([i],e,t)})).then(n).then(t(s),o(r))}})),define("JScript/Common/whenContext",[],(function(){function e(e){e()}function t(e,t){e.dont(t)}function n(e,t){e(t);var n=e.dont.bind(null,t);return this.eventSubscribers.push(n),n}function o(e,o){var i=n.bind(e,o);return i.do=i,i.dont=t.bind(null,o),i}function i(){if(this.destroyed)throw new Error("This context has been destroyed!");if(0===arguments.length){var e=f();return this.childContexts.push(e.destroyContext),e.when}if(1===arguments.length&&"function"==typeof arguments[0]){var t=o(this,arguments[0]);return t.isSubscribedTo=o(this,arguments[0].isSubscribedTo),t}if(2===arguments.length&&"function"==typeof arguments[1])return n.call(this,arguments[0],arguments[1]);if(3===arguments.length&&"function"==typeof arguments[2])return r().call(this,arguments[0],arguments[1],arguments[2]);if(4===arguments.length&&"function"==typeof arguments[2])return r().call(this,arguments[0],arguments[1],arguments[2],arguments[3]);throw new Error("unknown arguments",arguments)}function s(e,t,n){e.removeEventListener(t,n)}function r(e,t,n,o){e.addEventListener(t,n,o);var i=s.bind(null,e,t,n);return this.eventListeners.push(i),i}function a(e,t){var n=window.setTimeout(e,t);return this.timeouts.push(c.bind(null,n)),n}function c(e){window.clearTimeout(e)}function u(e,t){var n=window.setInterval(e,t);return this.intervals.push(l.bind(null,n)),n}function l(e){window.clearInterval(e)}function d(e){this.onDestroyListeners.push(e)}function p(){this.childContexts.forEach(e),this.childContexts=[]}function h(){this.destroyed||(this.eventSubscribers.forEach(e),this.onDestroyListeners.forEach(e),this.childContexts.forEach(e),this.eventListeners.forEach(e),this.timeouts.forEach(e),this.intervals.forEach(e),this.eventSubscribers=null,this.onDestroyListeners=null,this.childContexts=null,this.eventListeners=null,this.timeouts=null,this.intervals=null,this.destroyed=!0)}function f(){var e={destroyed:!1,onDestroyListeners:[],childContexts:[],eventSubscribers:[],eventListeners:[],timeouts:[],intervals:[]},t=i.bind(e);return t.thisIsDestroyed=d.bind(e),t.destroyChildContexts=p.bind(e),t.addEventListener=r.bind(e),t.removeEventListener=s,t.setTimeout=a.bind(e),t.clearTimeout=c,t.setInterval=u.bind(e),t.clearInterval=l,{when:t,destroyContext:h.bind(e)}}return f().when})),define("JScript/Common/helper",(function(){return new function(){this.getCityByPostalCode=function(e,t){var n="/Proxy.aspx/NameOfPlaceFromPostcode?postcode="+e.trim();$.getJSON(n).success((function(e){e&&e.valid?t(e.result):t("")})).fail((function(){t("")}))},this.triggerCustomEvent=function(e,t){var n;"function"==typeof CustomEvent?n=new CustomEvent(e,{detail:t}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t);document.dispatchEvent(n)}}})),define("PageDependentComponents/RichRelevance/events",["komplett-pubsub"],(function(e){return e.extend({updatedPageData:function(e){},reset:function(){},addToCart:function(e){},recsLoaded:function(e){},promosLoaded:function(e){},navLoaded:function(e){}})})),define("ksc-alert/events",["komplett-pubsub"],(function(e){return e.extend({alertAdded:function(e,t,n,o){},alertArrayAdded:function(e){},removeAlerts:function(){},removeAlert:function(e){},toggleWrapperCss:function(e,t){}})})),define("ksc-alert/ViewModel",["knockout","ksc-alert/events"],(function(e,t){return function(n){var o=this,i="ksc-alert-sticky";this.alerts=e.observableArray(),this.isOutOfView=e.observable(!1),this.isOutOfView.subscribe((function(e){var t=o.wrapperCss();t[i]=!!r()&&e,o.wrapperCss(t)})),this.wrapperCss=e.observable({}),this.receiver="global";var s=function(e,t){return n&&n.messages&&n.messages.hasOwnProperty(e)?n.messages[e]:t?s(t):e},r=function(){return e.utils.arrayFilter(o.alerts(),(function(e){return e.isVisible()})).length>0};this.addAlert=function(t,n,s){!function(){if(!r()&&o.isOutOfView()){var e=o.wrapperCss();e[i]=!0,o.wrapperCss(e)}}();var a=function(t,n){var i=null;return e.utils.arrayFirst(o.alerts(),(function(e){var o,s;o=e.message,s=t,0==o.toString().localeCompare(s.toString())&&e.level==n&&(i=e)})),i}(t,n);if(null!=a)return a.isVisible(!0),void a.hasFocus(!0);o.alerts.push({message:t,level:n,isVisible:e.observable(!0),hasFocus:e.observable(!0),closeAlert:function(){this.isVisible(!1),o.alertsChanged()},alertLevelClass:"ksc-alert-"+n,iconClass:"ksc-alert-"+n+"-icon",receiver:s}),o.alertsChanged()},this.hasAlerts=e.computed((function(){return o.alerts.length>0})),this.toggleAlert=function(e){e(!e())},this.modelChanged=function(e){e&&$.each(e,(function(e,t){o.addAlert(t.message,t.level.toLowerCase(),t.receiver)}))},this.removeAlerts=function(){o.alerts.removeAll()},this.removeAlert=function(e){o.alerts.remove((function(t){return t.receiver==e}))},this.alertsChanged=function(){if(!r()){var e=o.wrapperCss();e[i]=!1,o.wrapperCss(e)}},t.alertAdded.subscribeTo((function(e,t,n,i){(function(e){var t=!e&&"global"===o.receiver.toLowerCase(),n=e&&e.toLowerCase()===o.receiver.toLowerCase();return t||n})(n)&&(e=s(e,i))&&e.length>0&&o.addAlert(e,t,n)})),t.alertArrayAdded.subscribeTo((function(e){o.modelChanged(e)})),t.removeAlerts.subscribeTo((function(){o.removeAlerts()})),t.removeAlert.subscribeTo((function(e){o.removeAlert(e)})),t.toggleWrapperCss.subscribeTo((function(e,t){var n=o.wrapperCss();n[e]=t,o.wrapperCss(n)})),n&&(n.alertArray&&this.modelChanged(n.alertArray),n.receiver&&(this.receiver=n.receiver),n&&n.stickyCss&&(i=n.stickyCss))}})),define("ksc-alert",["ksc-alert/ViewModel","ksc-alert/events"],(function(e,t){return{init:function(e){e={someOption:void 0===e.someOption?"some value":e.someOption}},ViewModel:e,events:t}})),define("JScript/ShoppingCart/events",["komplett-pubsub"],(function(e){return e.extend({cartUpdated:function(e){},cartCleared:function(){},cartNewItem:function(e){},shoppingCartLoadingChanged:function(e){},invalidAgeAddedForUser:function(e){}})})),define("Components/BuyButton/AddToCartNotificationViewModel",["JScript/ShoppingCart/events","ksc-alert","JScript/Common/gaAddToCartService","PageDependentComponents/RichRelevance/events","JScript/Common/helper"],(function(e,t,n,o,i){return function(s,r){var a,c=this;this.insurancId=null,this.offerId=s.offerId,this.buttonClicked=ko.observable(!1),this.itemKeptInCart=ko.observable(!1),this.itemReplaced=ko.observable(!1);var u={0:"error",1:"warning"};this.showAddedToCartText=ko.computed((function(){return c.buttonClicked()&&!c.itemKeptInCart()&&!c.itemReplaced()})),this.showItemKeptInCartText=ko.computed((function(){return c.buttonClicked()&&c.itemKeptInCart()})),this.showItemReplacedText=ko.computed((function(){return c.buttonClicked()&&c.itemReplaced()})),this.addToCartNotification=function(u,l,d){if(u=void 0!==u?u:s,!c.buttonClicked()){var p=ko.utils.unwrapObservable(r);void 0!==u.linkURL&&(u.sku=u.id,u.webtext1=u.name,u.currency=u.currencyCode),l&&(c.offerId=null),fetch("/PagesAsync/AddToCartNotificationApi/AddProductToCartAsync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:u.sku,quantity:p,offerId:c.offerId})}).then((function(e){return e.ok?e.json():Promise.reject()})).then((function(s){s.success?(d&&d(),e.cartUpdated.publish(s.shoppingCartSummary),i.triggerCustomEvent("cartUpdatedCaas",s.shoppingCartSummary),e.cartNewItem.publish(u,u.preventPopup),c.buttonClicked(!0),n.trackAddedToCart({name:u.webtext1,id:u.sku,price:n.formatPrice(u.price),quantity:p,dimension9:u.sellerId,dimension14:u.sellerName,brand:u.brand,category:u.navigationPath,groupId:u.groupId,subGroupId:u.subGroupId,divisionId:u.divisionId,groupName:u.groupName,subGroupName:u.subGroupName,divisionName:u.divisionName},u.currency),o.addToCart(u.sku)):(s.shoppingCartSummary&&s.numberOfItems&&(e.cartUpdated.publish(s.shoppingCartSummary),i.triggerCustomEvent("cartUpdatedCaas",s.shoppingCartSummary)),void 0!==s.alerts&&s.alerts.forEach((function(e){t.events.alertAdded.publish(e.message,e.level)})))})),clearTimeout(a),a=setTimeout((function(){c.buttonClicked(!1)}),3e3)}},this.replaceProductInCartNotification=function(o){return new Promise((function(s,r){fetch("/PagesAsync/QuantityPurchaseLimit/ReplaceProductJson",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(r){if(r.success){c.buttonClicked(!0),c.itemReplaced(!0),e.cartUpdated.publish(r.shoppingCartSummary),i.triggerCustomEvent("cartUpdatedCaas",r.shoppingCartSummary);var l=o.productToAdd;n.trackAddedToCart({name:l.webtext1,id:l.sku,price:n.formatPrice(l.price),quantity:1,dimension9:l.sellerId,dimension14:l.sellerName,brand:l.brand,category:l.navigationPath},o.storeCurrency),clearTimeout(a),a=setTimeout((function(){c.buttonClicked(!1),c.itemKeptInCart(!1),c.itemReplaced(!1)}),2e3)}else if(r.alert){var d=u[r.alert.level];t.events.alertAdded.publish(r.alert.customMessage,d)}s(r.success)})).catch(r)}))},this.productKeptInCartNotification=function(){c.buttonClicked(!0),c.itemKeptInCart(!0),clearTimeout(a),a=setTimeout((function(){c.buttonClicked(!1),c.itemKeptInCart(!1),c.itemReplaced(!1)}),2e3)}}})),define("JScript/Common/TextDecoder",[],(function(){function e(){}function t(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}return e.prototype.decode=function(e){return function(e,n,o){var i="",s="";o=Math.min(e.length,o||1/0);for(var r=n=n||0;r<o;r++)e[r]<=127?(i+=t(s)+String.fromCharCode(e[r]),s=""):s+="%"+e[r].toString(16);return i+t(s)}(e,0,e.length)},e})),define("JScript/Common/AtobUtf8",[],(function(){for(var e=[],t=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=o.length;i<s;++i)e[i]=o[i],t[o.charCodeAt(i)]=i;function r(t,n,o){for(var i,s,r=[],a=n;a<o;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),r.push(e[(s=i)>>18&63]+e[s>>12&63]+e[s>>6&63]+e[63&s]);return r.join("")}return t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63,{fromByteArray:function(t){for(var n,o=t.length,i=o%3,s=[],a=0,c=o-i;a<c;a+=16383)s.push(r(t,a,a+16383>c?c:a+16383));return 1===i?(n=t[o-1],s.push(e[n>>2]+e[n<<4&63]+"==")):2===i&&(n=(t[o-2]<<8)+t[o-1],s.push(e[n>>10]+e[n>>4&63]+e[n<<2&63]+"=")),s.join("")},toByteArray:function(e){for(var o,i=function(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}(e),s=i[0],r=i[1],a=new n(function(e,t,n){return 3*(t+n)/4-n}(0,s,r)),c=0,u=r>0?s-4:s,l=0;l<u;l+=4)o=t[e.charCodeAt(l)]<<18|t[e.charCodeAt(l+1)]<<12|t[e.charCodeAt(l+2)]<<6|t[e.charCodeAt(l+3)],a[c++]=o>>16&255,a[c++]=o>>8&255,a[c++]=255&o;return 2===r&&(o=t[e.charCodeAt(l)]<<2|t[e.charCodeAt(l+1)]>>4,a[c++]=255&o),1===r&&(o=t[e.charCodeAt(l)]<<10|t[e.charCodeAt(l+1)]<<4|t[e.charCodeAt(l+2)]>>2,a[c++]=o>>8&255,a[c++]=255&o),a}}})),define("querystring",[],(function(){return querystring})),define("PageDependentComponents/RichRelevance/promoService",["querystring"],(function(e){return{setTargetAndReportUrls:function(t){t.forEach((function(t){var n,o;t.targetUrl=(n=t.destination_URL,o=n.split("?")[1],e.parse(o).ct),t.reportClickUrl=function(e,t){var n=RegExp(t+"=.*&?");return e.replace(n,t)}(t.destination_URL,"ct")}))}}})),define("PageDependentComponents/MultiLevelNavigation/MegaMenuCache",[],(function(){return function(e){var t=window.sessionStorage;try{t.setItem("isAvailable",!0)}catch(e){t={items:{},setItem:function(e,n){t.items[e]=n},getItem:function(e){return t.items[e]},removeItem:function(e){delete t.items[e]}}}this.getOrSetItem=function(n,o,i,s){var r,a=t.getItem(n);try{r=JSON.parse(a)}catch(e){t.removeItem(n)}if(r&&r.timestamp&&r.content&&r.content.navigationElements&&r.customerId===o){var c=new Date,u=new Date(r.timestamp);u.setMinutes(u.getMinutes()+e),c.getTime()>u.getTime()?l().then((function(e){s(e.content)})):s(r.content)}else l(o).then((function(e){s(e.content)}));function l(e){return fetch(i).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(o){t.removeItem(n);var i={timestamp:new Date,customerId:e,content:o};return t.setItem(n,JSON.stringify(i)),i})).catch((function(){}))}},this.clearCache=function(e){t.removeItem(e)}}})),define("Pages/ProductPage/events",["komplett-pubsub"],(function(e){return e.extend({productPageChange:function(e){},productPageLoading:function(e){},productPageBreadcrumbsChanged:function(e){}})})),define("dataLayer",[],(function(){return dataLayer})),define("JScript/Search/searchPageEvents",["komplett-pubsub"],(function(e){return e.extend({searchResultLoaded:function(e,t,n){},searchResultLoading:function(e){},nextPageResultLoaded:function(e,t,n){},sortBy:function(e,t){},searchInStock:function(e){},loadMoreResults:function(e){},nLevelCategoriesChanged:function(e,t){},pageTitleChanged:function(e,t,n){},findSkus:function(e){},displayModeChanged:function(e){},selectProduct:function(e){},unselectProduct:function(e){}})})),define("PageDependentComponents/SearchField/events",["komplett-pubsub"],(function(e){return e.extend({activated:function(){},deactivated:function(){},searchIsOpen:function(){}})})),define("JScript/Common/validator",(function(){return{observable:function(e){var t=ko.observable(e);return t.error=ko.observable(),t.focus=ko.observable(!1),t.valid=ko.computed((function(){return!t.error()})),t.subscribe((function(){t.error("")})),t},observableArray:function(e){var t=ko.observableArray(e);t.error=ko.observable();for(var n=0;n>t.length;n++)t[n].focus=ko.observable(!1),t[n].valid=ko.computed((function(){return!t.error()}));return t.valid=ko.computed((function(){return!t.error()})),t.subscribe((function(){t.error("")})),t},unwrapValues:function(e){var t={};return Object.keys(e).forEach((function(n){t[n]=ko.utils.unwrapObservable(e[n])})),t},mapErrors:function(e,t){var n=!0;return Object.keys(t).forEach((function(e){var n=t[e];n&&ko.isObservable(n.error)&&n.error()&&n.error("")})),e.forEach((function(e){var o,i,s=(o=e,i={},$.map(o,(function(e,t){i[t.charAt(0).toLowerCase()+t.slice(1)]=o[t]})),i);if(s&&s.propertyName){var r=t[s.propertyName];r&&ko.isObservable(r.error)&&(r.error(""),s.errors.length>0&&(r.error(s.errors[0]),n&&r.focus(!0),n=!1))}})),n}}})),define("JScript/Common/gaPromotionService",[],(function(){return{trackPromotionClick:function(e){var t={event:"promotionClick",ecommerce:{promoClick:{promotions:e}}};dataLayer.push(t)},trackImpression:function(e){var t={event:"promotionView",ecommerce:{promoView:{promotions:e}}};dataLayer.push(t)}}})),define("JScript/Common/pushStateNavigationService",[],(function(){function e(){}var t="pushState"in history;function n(e){return"?"===e?location.pathname:e}return{pushState:t?function(e,t){e=n(e),history.pushState(t,"",e)}:e,replaceState:t?function(e,t){e=n(e),history.replaceState(t,"",e)}:e}})),define("Components/SmallCart/SmallCartSummaryService",[],(function(){function e(){return fetch("/PagesAsync/AddToCartNotificationApi/GetSmallCartSummary").then((function(e){return e.ok?e.json():Promise.reject()})).then((function(e){return{isGross:e.shoppingCartSummary.isGross,priceTotal:e.shoppingCartSummary.subtotal,priceTotalGross:e.shoppingCartSummary.subtotalGross,productsQuantity:e.numberOfItems}}))}return{getSummary:e,getSummaryOnBackNavigation:function(){return new Promise((function(e,t){window.performance.navigation.type===window.performance.navigation.TYPE_BACK_FORWARD?e():t()})).then((function(){return e()}))}}})),define("ksc-interaction-tracking",(function(){return{trackSocialInteraction:function(e){dataLayer.push({event:"GAInteractionEvent",eventCategory:"Social",eventAction:e,eventLabel:void 0,eventValue:void 0})},trackGenericInteraction:function(e,t){dataLayer.push({event:"GAInteractionEvent",eventCategory:e,eventAction:t,eventLabel:void 0,eventValue:void 0})},trackFullInteraction:function(e,t,n,o){dataLayer.push({event:"GAInteractionEvent",eventCategory:e,eventAction:t,eventLabel:n,eventValue:o})}}})),define("JScript/Common/cookieService",[],(function(){return new function(){this.set=function(e,t){$.cookie(e,t,{path:"/"})},this.get=function(e){return $.cookie(e)},this.remove=function(e){$.removeCookie(e,{path:"/"})}}})),define("Components/Cms/Components/IconFilterButtons/events",["komplett-pubsub"],(function(e){return e.extend({filterSelected:function(e,t){}})})),define("Components/ResponsiveNavigation/events",["komplett-pubsub"],(function(e){return e.extend({departmentMenuOpened:function(){},verticalMenuOpened:function(){},responsiveMenuOpened:function(){},responsiveMenuClosed:function(){}})})),define("JScript/Common/cookieReader",["JScript/Common/AtobUtf8","JScript/Common/TextDecoder"],(function(e,t){var n=new(window.TextDecoder||t)("utf-8");function o(e){var t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():""}function i(t){var o=e.toByteArray(t);return n.decode(o)}return{getJsonCookieValue:function(e){var t=o(e);return t?JSON.parse(t):null},readCookieValueAsObject:function(e,t){return JSON.parse(function(e,t){var n=e.replace(/[\[\]]/g,"\\$&"),i=new RegExp("[?&]*"+n+"(=([^&#]*)|&|#|$)").exec(o(t));return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}(e,t))},getBase64CookieAsObject:function(e){var t=o(e);return""===t?{}:JSON.parse(i(t))},setBase64CookieFromObject:function(e,t,n){var o,i=e+"="+(o=JSON.stringify(t),btoa(encodeURIComponent(o).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))+"; Path=/");n&&(i+="; Expires="+n.toGMTString()),document.cookie=i},getJwtTokenAsObject:function(e){var t=o(e);if(""===t)return{};try{var n=t.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(i(function(e){switch(e.length%4){case 1:return e+"===";case 2:return e+"==";case 3:return e+"=";default:return e}}(n)))}catch(e){return{}}},getCookieValue:function(e){return o(e)}}})),define("JScript/Common/requestContext",["JScript/Common/cookieReader"],(function(e){var t,n=e.getJwtTokenAsObject("Komplett.Caas.Session");return n&&n.exp?{displayName:n.cn?n.cn.split(" ")[0]:"",customerName:n.cn,customerNumber:n.aid,isAnonymous:!!n.ann,isProfileAuthenticated:!!n.ia,isBusinessCustomer:(t=n.cmg,void 0!==t&&40!=t&&50!=t),profileId:n.pid,isInLoyaltyClub:!!n.kc,isCrm:!!n.cid,visitGuid:n.vg,partnerNumber:n.pn}:{displayName:"",isAnonymous:!0,isProfileAuthenticated:!1,isBusinessCustomer:!1,isCrm:!1}})),define("Components/BuyButton/buyButtonEvents",["komplett-pubsub"],(function(e){return e.extend({addedToCartNotification:function(e,t,n){},addedToCartNotificationWithoutBundlingUbo:function(e){},quantityPurchaseLimitKeepCurrentState:function(){},quantityPurchaseLimitReplaceProduct:function(e){}})})),define("Components/NavigationHeader/events",["komplett-pubsub"],(function(e){return e.extend({hidden:function(){}})})),define("Components/QuantityPicker/QuantityPickerEvents",["komplett-pubsub"],(function(e){return e.extend({quantityChanged:function(e,t,n,o,i,s){},backendUpdated:function(e,t,n,o,i){}})})),define("JScript/Common/colorChanger",[],(function(){return function(e,t){var n=!1;"#"===e[0]&&(e=e.slice(1),n=!0);var o=parseInt(e,16),i=(o>>16)+t;i>255?i=255:i<0&&(i=0);var s=(o>>8&255)+t;s>255?s=255:s<0&&(s=0);var r=(255&o)+t;r>255?r=255:r<0&&(r=0);var a=(n?"#":"")+(r|s<<8|i<<16).toString(16);return 7===a.length?a:(n?"#":"")+e}})),define("bower_components/ksc-ubo/dist/js/custombindings",["knockout","jquery"],(function(e,t){e.bindingHandlers.positionCalculator={update:function(n,o){var i=o(),s=i.actionElement,r=i.topLeft,a=t(n),c=t(window),u=i.open,l="rnr"+i.id,d=(i.ubos(),i.screenIsXs),p=i.callback;contentRendered=i.contentRendered,neverOpenUpwards=i.neverOpenUpwards;var h=t(s),f=function(){e.bindingHandlers.positionCalculator.resize(s,r,a,c,h,d,neverOpenUpwards,p)};t(window).off("resize."+l,f),contentRendered&&contentRendered()&&f(),u()&&(f(),t(window).on("resize."+l,f))},resize:function(e,t,n,o,i,s,r,a){var c,u,l=o.width(),d=o.height(),p={},h=n.css("zIndex"),f=s();if(n.removeAttr("style"),n.css("zIndex",h),f&&n.css("max-height",.92*d),n.css("max-width",.92*l),e)c=i.offset(),u=e.getBoundingClientRect(),f||(u.left>l-u.left?(p.left=c.left+i.outerWidth(),n.css("right","0")):(p.left=c.left,n.css("left","0")),u.top>d-u.top&&n.height()<u.bottom&&!r?(p.top=c.top+i.outerHeight(),n.css("bottom","0")):(p.top=c.top,n.css("top","0")),t(p));else{var m=n.outerHeight()<73?350:n.outerHeight();c={top:Math.max(0,window.pageYOffset+(d-m)/2),left:Math.max(0,(l-n.outerWidth())/2)},f||(p.left=c.left,n.css("left","0"),p.top=c.top,n.css("top","0"),t(p))}"function"==typeof a&&a()}},e.bindingHandlers.uboMove={update:function(e,n){var o=n(),i=o&&o.topLeft?o.topLeft():void 0;if(i){var s={top:i.top+"px",left:i.left+"px"};t(e).css(s)}}};var n=null;e.bindingHandlers.uboKeyTrap={init:function(e){e.beforeSpan=t("<span tabindex=0></span><span tabindex=0></span>"),e.afterSpan=t("<span tabindex=0></span><span tabindex=0></span>"),n=e},update:function(n,o){var i="function"==typeof o?o():o().keyTrap();if(e.unwrap(i)){var s=void 0===o().scope?t(n):t(o().scope,n);s.prepend(n.beforeSpan),s.append(n.afterSpan),t(n.beforeSpan[0]).on("focus.keytrap",(function(){n.afterSpan[0].focus()})),t(n.afterSpan[1]).on("focus.keytrap",(function(){n.beforeSpan[1].focus()})),void 0===o().scope&&n.beforeSpan[1].focus()}else n.beforeSpan[0].parentNode&&(t(n.beforeSpan).remove(),t(n.afterSpan).remove())},renderedHandler:function(){n.beforeSpan[1].focus()}},e.bindingHandlers.uboOnKeyUp={update:function(n,o){var i=e.utils.unwrapObservable(o());if(e.utils.unwrapObservable(i.when)){t(document).unbind("keyup."+i.name).bind("keyup."+i.name,(function(e){e.keyCode==i.key&&i.do(e)}))}else t(document).unbind("keyup."+i.name)}},e.bindingHandlers.uboContentRendered={update:function(e,t){setTimeout((function(){t()(!0)}),1)}},e.bindingHandlers.uboNonEmptyText={update:function(n,o){var i=e.utils.unwrapObservable(o());i&&t(n).text(i)}}})),define("JScript/Common/gaGetCookieValue",[],(function(){return function(){return new Promise((function(e,t){!function(e,t){var n=12,o=setInterval((function(){if("undefined"!=typeof ga){var i;ga((function(){var e=ga.getAll();e.length&&(i=e[0].get("linkerParam"))})),clearInterval(o),e(i)}0===n&&(clearInterval(o),t());n--}),200)}(e,t)}))}})),define("JScript/EmptyViewModel",(function(){return function(){}})),define("JScript/Common/viewModelLoader",["JScript/Common/fastRequire","JScript/Common/whenContext"],(function(e,t){var n=function(){if("IntersectionObserver"in window){var e=new Map,t=new IntersectionObserver((function(n){n.forEach((function(n){if(void 0===n.isIntersecting?n.intersectionRatio>0:n.intersectionRatio){var o=e.get(n.target);o&&(t.unobserve(n.target),e.delete(n.target),o())}}))}),{threshold:.1,rootMargin:"200px 0px"});return function(n,o){e.set(n,o),t.observe(n),ko.utils.domNodeDisposal.addDisposeCallback(n,(function(){t.unobserve(n),e.delete(n)}))}}return function(e,t){t()}}();return{loadViewModel:function(){s(document.querySelectorAll("[data-viewmodel]")).concat(s(document.querySelectorAll("[data-lazy-viewmodel]"))).forEach((function(t){var n=t.getAttribute("data-viewmodel")||t.getAttribute("data-lazy-viewmodel");!function(e){for(;(e=e.parentNode)&&"function"==typeof e.hasAttribute;)if(e.hasAttribute("data-viewmodel")||e.hasAttribute("data-lazy-viewmodel"))return!0;return!1}(t)?o(t,n,null,(function(e,o){t["@ViewModelName"]=n,ko.utils.domData.clear(t),ko.applyBindings(e,t),ko.utils.domNodeDisposal.addDisposeCallback(t,o.destroyChildContexts)})):e(n)}))},loadNestedViewModel:function(e,t,n){o(e,t,n,(function(o,i){e["@ViewModelName"]=t;var s=n.createChildContext(o);ko.utils.domData.clear(e),ko.applyBindings(s,e),ko.utils.domNodeDisposal.addDisposeCallback(e,i.destroyChildContexts)}))}};function o(e,t,o,s){e.hasAttribute("data-lazy-viewmodel")?n(e,(function(){i(e,t,o,s)})):i(e,t,o,s)}function i(n,o,i,s){e(o,(function(e){if(null!=e){var r=function(e,t){var n=$(e).attr("data-initObject");if(!n)return function(e,t){var n=e.getAttribute("data-params");if(!n)return;var o=ko.bindingProvider.instance.nativeBindingProviderInstance.parseBindingsString(n,t,e,{valueAccessors:!0,bindingParams:!0}),i=Object.create(null);for(var s in o)i[s]=ko.computed(o[s],null,{disposeWhenNodeIsRemoved:e});var r=Object.create(null);for(s in i){var a=i[s],c=a.peek();a.isActive()?r[s]=ko.computed({read:function(){return ko.unwrap(a())},write:ko.isWriteableObservable(c)&&function(e){a()(e)},disposeWhenNodeIsRemoved:e}):r[s]=c}return r}(e,t);try{return JSON.parse(n)}catch(e){console.error(e)}return}(n,i),a=t(),c="object"==typeof e?e:new e(r,a());!function(e,t,n){try{e(t,n)}catch(e){console.error(e)}}(s,c,a)}else console.error('ViewModel is undefined for data-viewmodel="'+o+'" on element',n)}),(function(e){console.error("failed to load viewmodel(s) while loading viewModel "+o,e.requireModules),console.error(e)}))}function s(e){return Array.prototype.slice.call(e,0)}})),define("Components/Chat/ChatViewModel",["komplett-chat"],(function(){return function(e){}})),define("PagesAsync/Login/LoginResponsiveViewModel",["ksc-ubo","JScript/Common/validator","ksc-alert","JScript/Common/helper"],(function(e,t,n,o){return function(i,s){var r=this;function a(e,t){try{return!!e&&(e.IsSuccess?(window.external&&void 0!==window.external.AutoCompleteSaveForm&&window.external.AutoCompleteSaveForm(t),r.redirectTo(function(e){var t=location.pathname+location.search+location.hash;return r.redirectTo().length>0?r.redirectTo():null!==e.Data&&e.Data.RedirectTo&&e.Data.RedirectTo.length>0?e.Data.RedirectTo:t}(e))):r.responseError(null,null,e.Error),e.IsSuccess)}catch(e){return r.responseError(null,null,e.message),!1}}function c(e,t,n){var o=r.redirectTo()?r.redirectTo():window.location.pathname+window.location.search;"/"===o&&(o=""),$.ajax({url:"/PagesAsync/Login/UseIdentityService",dataType:"json",type:"GET",success:function(i){i&&i.UseIdentityService?function(e){r.replaceUrl?window.location.replace(e):window.location=e}("/login?redirectTo="+o):u(e,t,n)},error:r.responseError,fail:r.responseError})}function u(t,n,a){if(void 0===i.hasItems||r.cartHasItems){var c=new e.uboAsyncContentModel;return c.header=r.header,c.contentViewModel=r.contentModel,c.url=r.uiUrl,c.actionElement=a||n&&n.currentTarget,s(e.events.uboClosed).do((function(){o.triggerCustomEvent("uboWithLoginClosed",{})})),e.uboService.openAsync(c)}}this.isLoading=ko.observable(!1),this.redirectTo=ko.observable(""),this.header="",this.apiUrl="/PagesAsync/Login/Authenticate",this.authorizeUrl="/PagesAsync/Login/AuthorizeAsync",this.uiUrl="/PagesAsync/Login/Show",this.fields={username:t.observable(""),password:t.observable(""),redirectTo:r.redirectTo},this.validate=function(e){r.isLoading(!0);var n=$.ajax({url:r.apiUrl,data:t.unwrapValues(r.fields),type:"POST",contentType:"application/x-www-form-urlencoded",dataType:"json",error:r.responseError,fail:r.responseError});return $.when(n).then((function(t){return a(t,e)}))},this.responseError=function(e,t,o){n.events.alertAdded.publish(o.name||o||t,"error","login"),r.isLoading(!1)},this.contentModel=function(){this.isLoading=r.isLoading,this.fields=r.fields,this.validate=r.validate,this.redirectTo=r.redirectTo,this.onSubmit=function(e,n){return n.preventDefault(),r.validate().then((function(e){e&&$.ajax({url:r.authorizeUrl,data:t.unwrapValues(r.fields),type:"POST",contentType:"application/x-www-form-urlencoded",error:r.responseError,fail:r.responseError}).then((function(e){window.location=e}))})),!1}},this.open=function(e,t,n){c(e,t,n)},this.openOnContainer=function(e,t){c(e,t,$(t.target).closest(".dropdown.login-button")[0])},this.openWithSavingCartList=function(e,t,n){sessionStorage.setItem("redirectedWithSavingCart","true"),u(e,t,n)},this.onCartHasItemsChanged=function(e){r.cartHasItems=e.detail.hasItems},i&&i.redirectTo&&r.redirectTo(decodeURIComponent(i.redirectTo)),r.header=i.title,r.cartHasItems=i.hasItems,r.replaceUrl=i&&!!i.replace,s.addEventListener(document,"cartHasItems",(function(e){r.onCartHasItemsChanged(e)}))}})),define("PageDependentComponents/VerticalMenu/ResponsiveNavigationViewModel",["Components/ResponsiveNavigation/events","JScript/Common/pushStateNavigationService"],(function(e,t){return function(n,o){var i=this;this.currentVerticalMenuIndex=ko.observable(0),this.isVerticalMenuOpen=ko.observable(n.showMenuOpened),this.isTransitionEnabled=ko.observable(!0),this.showVerticalMenu=this.isVerticalMenuOpen.throttleFalsing(500);var s=function(t){t?e.responsiveMenuOpened.publish():e.responsiveMenuClosed.publish()};n.showMenuOpened&&s(!0),this.close=function(){i.isVerticalMenuOpen(!1)},this.backLinkHandler=function(){i.isVerticalMenuOpen(!1)},o(e.verticalMenuOpened).do((function(){t.replaceState(location.href,{menuClosed:!0}),t.pushState(location.href,null),i.currentVerticalMenuIndex(0),i.isVerticalMenuOpen(!0)})),this.isVerticalMenuOpen.throttledSubscribe(100,s),this.onPopState=function(e){e.state&&e.state.menuClosed&&(i.isVerticalMenuOpen()?i.isVerticalMenuOpen(!1):history.back())},window.addEventListener("popstate",i.onPopState)}})),define("PageDependentComponents/SearchField/Layout2017/SearchOverlayViewModel",["PageDependentComponents/SearchField/events"],(function(e){return function(t,n){var o=this;this.isVisible=ko.observable(!1),this.throttledIsVisible=ko.computed(o.isVisible).extend({throttle:5}),this.throttledIsHidden=ko.computed(o.isVisible).extend({throttle:1e3}),n(e.searchIsOpen).do((function(e){o.isVisible(e)}))}})),define("PageDependentComponents/RichRelevance/RichRelevance",["PageDependentComponents/RichRelevance/promoService","PageDependentComponents/RichRelevance/events","JScript/Common/helper","JScript/Common/requestContext"],(function(e,t,n,o){return function(i,s){var r=i.isEnabled,a=i.pageData.requestContext,c=!1,u=null,l=function(a){s(t.recsLoaded).isSubscribedTo.dont(d),s(t.promosLoaded).isSubscribedTo.dont(p),s(t.navLoaded).isSubscribedTo.dont(h),function(e){e.requestContext.isCrm=o.isCrm,e.requestContext.visitGuid=o.visitGuid,e.requestContext.accountId=o.customerNumber,e.requestContext.isBusinessCustomer=o.isBusinessCustomer,e.requestContext.anonymous=o.isAnonymous,e.requestContext.partnerNumber=o.partnerNumber,e.requestContext.showAsNetPrices=o.isBusinessCustomer}(a),function(e){if(!r)return Promise.resolve(null);c||(c=!0,n.triggerCustomEvent("richRelevanceInitialized",{initObject:i,mutateInitObject:f}));var t=new URLSearchParams(window.location.search).get("cfrad");t&&(e.cfrad=t);return fetch("/rr/GetPlacementsAndPromos",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e),credentials:"same-origin"}).then((function(e){return e.ok?e.json():null}))}(a).then((function(n){n||(n={promos:[],placements:[]}),function(e){var t;e.rrAnnotations&&(window.rr_annotations_array?window.rr_annotations_array.push(e.rrAnnotations):window.rr_annotations_array=[e.rrAnnotations],window.rr_experience_browser?window.rr_experience_browser.start():((t=document.createElement("script")).src="//cdn.richrelevance.com/dashboard/applications/cfrad/dist/index.min.js",t.async=!0,document.getElementsByTagName("head")[0].appendChild(t)))}(n),e.setTargetAndReportUrls(n.promos||[]),u=n,d(t.recsLoaded.publish),p(t.promosLoaded.publish),h(t.navLoaded.publish),s(t.recsLoaded).isSubscribedTo(d),s(t.promosLoaded).isSubscribedTo(p),s(t.navLoaded).isSubscribedTo(h)}))};function d(e){return e(u.placements||[])}function p(e){return e(u.promos||[])}function h(e){return e(u.promos||[])}function f(e){i=e,t.reset.publish(),l(e.pageData)}s.addEventListener(document,"cartInitialized",(function(e){e&&e.detail&&(i.pageData.cartModel={productsInCart:e.detail.productsIds},i.pageData.pageType="Cart",i.pageData.recsPlacementIds=e.detail.placementIds,l(i.pageData))})),s.addEventListener(document,"cartItemsChanged",(function(e){e&&e.detail&&(i.pageData.cartModel={productsInCart:e.detail},l(i.pageData))})),l(i.pageData),s(t.updatedPageData).do(f),s(t.addToCart).do((function(e){r&&fetch("/rr/addtocart",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({sku:e,requestContext:a}),credentials:"same-origin"})}))}})),define("PageDependentComponents/Promo/PromoViewModel",["PageDependentComponents/RichRelevance/events","ksc-breakpoint-notifier","dataLayer"],(function(e,t,n){return function(o,i){var s=this,r=o.placementIds,a=null;this.promoList=ko.observableArray(),this.noPlacementReturned=ko.observable(!1),this.autoPlay=ko.observable(!1),this.isRendered=ko.observable(!1),this.showPlaceholderImage=ko.observable(!0),this.isXs=ko.observable(!1),this.swiperElement=ko.observable(),this.promoClick=function(e){return n.push({event:"promotionClick",ecommerce:{promoClick:{promotions:[{id:e.targetUrl,name:e.alt_txt,creative:e.media_URL.split("/").pop(),position:e.placement_name}]}}}),!0},this.afterLastItemIsRendered=function(){s.isRendered(!0)},this.onSliderInit=function(){s.showPlaceholderImage(!1)},this.toggleAutoPlay=function(){s.autoPlay(!s.autoPlay())},i(t.events.isXs).do((function(e){s.isXs(e),a||(a=s.swiperElement()),a&&a.update(a.element)})),i(e.promosLoaded).do((function(e){var t=e.filter((function(e){return r.includes(e.placement_name.split(".").pop())}));0===t.length?s.noPlacementReturned(!0):t.length>1&&s.autoPlay(!0),t.forEach((function(e){e.mediaUrlComputed=ko.computed((function(){return e.media_URL_xs&&s.isXs()?e.media_URL_xs:e.media_URL}))})),s.promoList(t),function(e){n.push({event:"promotionView",ecommerce:{promoView:{promotions:e.map((function(e){return{id:e.targetUrl,name:e.alt_txt,creative:e.mediaUrlComputed().split("/").pop(),position:e.placement_name}}))}}})}(t)}))}})),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("NumericStringFormat",[],t):"object"==typeof exports?exports.NumericStringFormat=t():e.NumericStringFormat=t()}(this,(function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toCurrencyString=function(e,t,n){var o;if("string"==typeof e){if(o=e,o=parseFloat(o.replace(/ /g,"").replace(",",".")),isNaN(o))return e}else o=e;var i=function(e,t,o,i,s,r,a){return n=void 0===t?o:t,function(e,t,n){var o=e.split(".");return o[0]=o[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+n),o.join(t)}(e.toFixed(n),i,s)+(0===n?r:a)};switch(t.toUpperCase()){case"DK":return i(o,n,0,",",".",",-","");case"FI":return i(o,n,2,",","","","");case"NO":return i(o,n,0,",","",",-","");case"SE":return i(o,n,0,",",".",":-","")}return String(o)}}])})),define("PageDependentComponents/Recommendations/RecommendationsViewModel",["ksc-breakpoint-notifier","ksc-ubo","PageDependentComponents/RichRelevance/events","Components/BuyButton/AddToCartNotificationViewModel","NumericStringFormat"],(function(e,t,n,o,i){return function(t,s){var r=t.options||{lgSlidesPerView:6,mdSlidesPerView:5},a=this;this.placementId=t.placementId,this.is4ProductsCarousel=t.is4ProductsCarousel,this.showXsSm=!t.hideXsSm,this.showDiscountBubble=t.showDiscountBubble,this.displayLoader=ko.observable(!0),this.noPlacementReturned=ko.observable(!1),this.message=ko.observable(),this.layoutName=ko.observable(),this.items=ko.observableArray(),this.showBuyButton=ko.observable(!1),this.isRendered=ko.observable(!1),this.isCaruselRendered=ko.observable(!1),this.slidesPerView=ko.observable(),this.decreaseSlidesPerViewWhenVerticalMenu=t.decreaseSlidesPerViewWhenVerticalMenu||0,this.isFirstSlide=ko.observable(!0),this.isLastSlide=ko.observable(!0),this.shouldLoad=ko.observable(!1),this.placementLoaded=ko.observable(!1),this.numberOfSlides=ko.computed((function(){return a.items().length})),this.hasMultipleSlides=function(){return a.numberOfSlides()>a.slidesPerView()},this.isRendered.subscribe((function(e){e||a.isCaruselRendered(!1)})),this.afterLastItemIsRendered=function(){a.isRendered(!0)},this.afterLastListItemIsRendered=function(){a.isRendered(!0),a.isCaruselRendered(!0)},this.isRenderedThrottled=ko.computed((function(){return a.isRendered()})).extend({throttle:1}),this.slidesPerViewThrottled=ko.computed((function(){return a.slidesPerView()})).extend({throttle:1}),this.setSlideState=function(e,t){a.isFirstSlide(e),a.isLastSlide(t)},this.sendResizeEvent=function(){var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)},this.hideBlankSpaceIfNoRR=function(e){s.setTimeout((function(){0===a.items().length&&a.noPlacementReturned(!0)}),e)},this.loadPlacementOnDevice=function(){a.shouldLoad()&&!a.placementLoaded()&&(a.hideBlankSpaceIfNoRR(3e3),a.placementLoaded(!0))},this.getPlacementMsg=function(e){return t.tabbedProductSections?e:e+":"},this.handlePlacement=function(e){a.message(a.getPlacementMsg(e.message)),e.items.forEach((function(e){e.addToCart=new o(e,1)})),a.items(e.items),a.layoutName(e.layoutName),a.noPlacementReturned(!1),0===e.items.length&&(a.isRendered(!0),a.noPlacementReturned(!0)),a.displayLoader(!1),a.sendResizeEvent()},this.ratingImageCssClass=function(e){return e<1?"image-rating-0-0":1==e?"image-rating-1-0":e<2?"image-rating-1-5":2==e?"image-rating-2-0":e<3?"image-rating-2-5":3==e?"image-rating-3-0":e<4?"image-rating-3-5":4==e?"image-rating-4-0":e<5?"image-rating-4-5":5==e?"image-rating-5-0":"image-rating-0-0"},this.getProductVariantToShow=function(e){return e?e.productVariants.find((function(e){return e.products.length>1&&e.groupByInListing})):null},this.calculateDiscount=function(e,t){return t<=0?100:0|Math.round(100*(1-e/t))},this.calculateDiscountInCurrency=function(e,t){return 0|Math.round(t-e)},this.formattedDiscount=function(e,t,n){var o=a.calculateDiscountInCurrency(e,t);return i.toCurrencyString(o,n,0)},s(n.reset).do((function(){a.isRendered(!1),a.noPlacementReturned(!0),a.isFirstSlide(!0),a.isLastSlide(!0),a.items([])})),s(n.recsLoaded).do((function(e){var t=e.find((function(e){return e.placement_name===a.placementId}));t?(function(e){return"recs_accessories"===e.placement_name&&"AdvancedMerchandisingStrategy"===e.strategy}(t)&&(t.items=[]),a.handlePlacement(t)):(a.isRendered(!0),a.noPlacementReturned(!0),a.displayLoader(!1))})),a.is4ProductsCarousel?a.slidesPerView(4):(s(e.events.isLg).do((function(e){e&&a.slidesPerView(r.lgSlidesPerView-a.decreaseSlidesPerViewWhenVerticalMenu)})),s(e.events.isMd).do((function(e){e&&a.slidesPerView(r.mdSlidesPerView-a.decreaseSlidesPerViewWhenVerticalMenu)}))),s(e.events.isSm).do((function(e){e&&a.slidesPerView(4)})),s(e.events.isXs).do((function(e){e&&a.slidesPerView(2)})),s(e.events.screenSizeChanged).do((function(e){(a.showXsSm||function(e){return"lg"===e||"md"===e}(e))&&(a.shouldLoad(!0),a.loadPlacementOnDevice())}))}})),define("PageDependentComponents/MultiLevelNavigation/MegaMenuViewModel",["PageDependentComponents/MultiLevelNavigation/MegaMenuCache","PageDependentComponents/MultiLevelNavigation/events","ksc-breakpoint-notifier","ksc-interaction-tracking","JScript/Common/requestContext"],(function(e,t,n,o,i){return function(s,r){var a=this,c=new e(10);function u(){a.isThirdLevelOpen(!1),a.secondLevelTitle(""),a.secondLevelSelected(""),a.secondLevelUrl(""),a.thirdLevel([]),d(),l()}function l(){a.isFifthLevelOpen(!1),a.fourthLevelTitle(""),a.fourthLevelSelected(""),a.fourthLevelUrl(""),a.fifthLevel([])}function d(){a.isFourthLevelOpen(!1),a.thirdLevelTitle(""),a.thirdLevelSelected(""),a.thirdLevelUrl(""),a.fourthLevel([])}function p(){c.getOrSetItem("MegaMenu2018ModelAsync",i.customerNumber,"/PagesAsync/MultiLevelNavigation/GetModel",(function(e){a.firstNavigationItem=e.navigationElements.filter((function(t){return t.categoryId===e.navigationElements[0].categoryId}))[0],a.desktopNavigationBar(e.desktopNavigationBar.map((function(e){return new m(e)}))),h()}))}function h(){var e,t;a.secondLevel(a.firstNavigationItem.navigationElements.map((function(e){return new b(e,2)}))),a.initialNavigationPath((e=a.firstNavigationItem,t=function e(t,n){return t.navigationElements&&t.navigationElements.map((function(t){return n[t.categoryId]=t,e(t,n)})),n}(e,{}),function e(n,o,i){if(o){var s=t[o];if(s&&(n.push(s),s.categoryParentId))return e(n,s.categoryParentId,i+1)}return n}([],a.currentGroupId,1).reverse().map((function(e,t){return new b(e,t+2)})))),a.isMobileNavigation()&&a.initialNavigationPath().map((function(e){f(e,e.level)}))}function f(e,t){var n=function(){};2===t&&(a.secondLevelSelected(e.categoryId),a.secondLevelTitle(e.text),a.secondLevelUrl(e.url),n=a.thirdLevel),3===t&&(a.thirdLevelSelected(e.categoryId),a.thirdLevelTitle(e.text),a.thirdLevelUrl(e.url),n=a.fourthLevel),4===t&&(a.fourthLevelSelected(e.categoryId),a.fourthLevelTitle(e.text),a.fourthLevelUrl(e.url),n=a.fifthLevel),n(e.navigationElements.map((function(t){return new b(t,e.level+1)})))}function m(e){var t=this;e&&Object.assign(this,e),this.isOpen=ko.observable(!1),this.backgroundIcon=this.iconContent?"url(data:image/svg+xml;base64,"+this.iconContent+") no-repeat":null,this.navigationElements=e&&e.navigationElements?e.navigationElements.map((function(e){return new m(e)})):[],this.close=function(){t.isOpen(!1)},this.toggle=function(){a.isSecondLevelOpen(!1),t.isOpen(!t.isOpen()),a.closeAll(t)}}function b(e,t){var n=this;e&&Object.assign(this,e),this.level=t,this.isOpen=ko.observable(!1),this.isFetched=!1,this.backgroundIcon=this.iconContent?"url(data:image/svg+xml;base64,"+this.iconContent+") no-repeat":null,this.isFocused=ko.observable(!1),this.open=function(){f(n,n.level)},this.navigate=function(e){a.isMobile()&&0!==e.navigationElements.length&&5!==e.level?n.open():window.location=e.url},this.openItem=function(e){!n.isFetched&&function(e){return(n.navigationElements||[]).filter((function(t){return t.categoryId===e})).length>0}(e)&&f(n,a.level);for(var t=n.items(),o=0;o<t.length;o++){if(t[o].categoryId===e)return n.open(),t[o].open(),!0;if(t[o].openItem(e))return n.open(),!0}return!1},this.hoverLevelSelector={in:n.open,out:function(){}}}this.currentGroupId=s.currentGroupId,this.firstNavigationItem={},this.fifthLevel=ko.observableArray([]),this.fourthLevel=ko.observableArray([]),this.thirdLevel=ko.observableArray([]),this.secondLevel=ko.observableArray([]),this.desktopNavigationBar=ko.observableArray([]),this.secondLevelAutoHeight=ko.observable(0),this.thirdLevelAutoHeight=ko.observable(0),this.fourthLevelAutoHeight=ko.observable(0),this.fifthLevelAutoHeight=ko.observable(0),this.customCampaignUrl=ko.observable(""),this.customCampaignName=ko.observable(s.customCampaignDefaultName),this.showThirdLevelBox=ko.computed((function(){return a.thirdLevelAutoHeight()>a.secondLevelAutoHeight()})),this.showFourthLevelBox=ko.computed((function(){return!!a.showThirdLevelBox()||a.fourthLevelAutoHeight()>a.thirdLevelAutoHeight()})),this.showFifthLevelBox=ko.computed((function(){return!!a.showFourthLevelBox()||a.fifthLevelAutoHeight()>a.fourthLevelAutoHeight()})),this.fourthLevelSelected=ko.observable(""),this.thirdLevelSelected=ko.observable(""),this.secondLevelSelected=ko.observable(""),this.secondLevelTitle=ko.observable(""),this.thirdLevelTitle=ko.observable(""),this.fourthLevelTitle=ko.observable(""),this.secondLevelUrl=ko.observable(""),this.thirdLevelUrl=ko.observable(""),this.fourthLevelUrl=ko.observable(""),this.initialNavigationPath=ko.observableArray([]),this.isMenuOpen=ko.observable(!1),this.isDesktopBarOpen=ko.observable(!1),this.isOverlayOpen=ko.computed((function(){var e=a.isMenuOpen()||a.isDesktopBarOpen();return t.multiLevelNavigationIsOpen.publish(e),e})),this.isXs=ko.observable(!1),this.isSm=ko.observable(!1),this.isMobile=ko.computed((function(){return a.isXs()||a.isSm()})),this.isMobileNavigation=ko.computed((function(){return!!a.initialNavigationPath().length&&a.isMobile()})),r(n.events.isXs).do((function(e){a.isXs(e)})),r(n.events.isSm).do((function(e){a.isSm(e)})),this.isSecondLevelOpen=ko.observable(!1),this.isSecondLevelOpen.subscribe((function(e){a.closeAll(),e&&o.trackGenericInteraction("Menu","Open"),a.isMenuOpen(e)})),this.isMobileNavigation.subscribe((function(e){e?h():u()})),this.isDesktopNavigationElementOpen=function(e){return a.desktopNavigationBar()[e]&&a.desktopNavigationBar()[e].isOpen},this.throttledNavigationOpen=ko.computed(a.isSecondLevelOpen).extend({throttle:5}),this.throttledNavigationClose=ko.computed(a.isSecondLevelOpen).extend({throttle:1e3}),this.isThirdLevelOpen=ko.observable(!1),this.thirdLevel.subscribe((function(e){a.isMobileNavigation()||(d(),l()),a.isThirdLevelOpen(!!e.length)})),this.isFourthLevelOpen=ko.observable(!1),this.fourthLevel.subscribe((function(e){a.isMobileNavigation()||l(),a.isFourthLevelOpen(!!e.length)})),this.isFifthLevelOpen=ko.observable(!1),this.fifthLevel.subscribe((function(e){a.isFifthLevelOpen(!!e.length)})),this.toggleMenu=function(){p(),a.isSecondLevelOpen(!a.isSecondLevelOpen())},this.closeMenu=function(){a.isSecondLevelOpen(!1),a.closeAll()},this.toggleDesktopBar=function(e){return function(){a.desktopNavigationBar()[e].toggle(),a.isDesktopBarOpen(a.isDesktopNavigationBarOpen())}},this.closeAll=function(e){a.desktopNavigationBar().forEach((function(t){e?e.categoryId!==t.categoryId&&t.close():t.close()})),a.isDesktopBarOpen(a.isDesktopNavigationBarOpen()),a.isMobileNavigation()||u()},this.navigateSeeAll=function(e){window.location=e()},this.goBack=function(){return a.isFifthLevelOpen()?a.isFifthLevelOpen(!1):a.isFourthLevelOpen()?a.isFourthLevelOpen(!1):a.isThirdLevelOpen()?a.isThirdLevelOpen(!1):a.isSecondLevelOpen()?a.isSecondLevelOpen(!1):void 0},this.isDesktopNavigationBarOpen=function(){return!!a.desktopNavigationBar().filter((function(e){return e.isOpen()})).length},this.getCustomCampaignPage=function(){if(i.customerName){var e=s.customCampaignUrlName;if(!e)return;fetch("/PagesAsync/PersonalDataLookup/GetCampaignUrl").then((function(e){if(e.ok)return e.text()})).then((function(t){if(t){var n=t.match(e+"=(.*)"),o=n&&n[1]?n[1]:null,i=o?t.replace("?"+e+"="+o,""):t;o&&a.customCampaignName(o),a.customCampaignUrl(i)}}))}},p(),this.getCustomCampaignPage()}})),define("PageDependentComponents/History/HistoryViewModel",["PageDependentComponents/Recommendations/RecommendationsViewModel","ksc-breakpoint-notifier","Components/ResponsiveNavigation/events","ksc-ko-extenders"],(function(e,t,n){return function(t,o){$.extend(this,new e(t,o()));var i=this;this.isResponsiveNavigation=ko.observable(!1),this.isHistoryMenuOpen=ko.observable(!1),this.showHistoryMenu=this.isHistoryMenuOpen.throttleFalsing(500),this.visibleForResponsiveNavigation=ko.observable(!1),this.isLayoutDirectionHorizontal=function(){return"horizontal"===t.layoutDirection},this.swiperDirection=ko.computed((function(){return"vertical"===t.layoutDirection?"vertical":"horizontal"})),this.isActive=ko.computed((function(){return"horizontal"===i.swiperDirection()&&i.isRenderedThrottled()})),this.close=function(){i.isHistoryMenuOpen(!1),n.responsiveMenuClosed()},this.numberOfSlides=ko.computed((function(){return i.items().length}))}})),define("PageDependentComponents/Footer/FooterViewModel",(function(){return function(e){var t=this;t.isGross=ko.observable(),t.includeVATText="",t.excludeVATText="",t.vatLinkText=ko.computed((function(){return t.isGross()?t.includeVATText:t.excludeVATText}),t),t.updateIsNetPrice=function(){fetch("/UpdateIsNetPrice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({isNetPrice:t.isGross()})}).then((function(e){e.ok&&location.reload()}))},t.includeVATText=e.includeVATText,t.excludeVATText=e.excludeVATText,t.isGross(!e.showNetPrices)}})),define("PageDependentComponents/BreakpointNotifier/BreakpointNotifierViewModel",["ksc-breakpoint-notifier"],(function(e){return function(t){e.init({fullResponsive:t.fullResponsive})}})),define("PageDependentComponents/BreadCrumbs/BreadCrumbsViewModel",["JScript/Search/searchPageEvents","Pages/ProductPage/events"],(function(e,t){return function(n,o){var i=this;this.crumbs=ko.observableArray(n.model.links),this.hereText=ko.observable(n.model.here),this.isCurrentLocationVisible=ko.observable(n.model.showCurrentLocationOnSmallScreens);var s=n.model.multipleChoiceText;o(e.nLevelCategoriesChanged).do((function(e,t){var n;i.crumbs(e.links),i.hereText(e.here),1===(n=t).length?i.hereText(n[0].text):i.hereText(s)})),o(t.productPageBreadcrumbsChanged).do((function(e){i.crumbs(e.links),i.hereText(e.here)}))}})),define("PagesAsync/WishListLinkBox/WishListLinkBoxViewModel",["ksc-ubo","PagesAsync/Login/LoginResponsiveViewModel","JScript/Common/requestContext"],(function(e,t,n){return function(o,i){var s=this,r=o.productId,a=o.headerText,c=ko.observable(!1),u=n.isProfileAuthenticated;s.wishListIconCss=ko.computed((function(){return c()?"fa-grey-wishlist":"fa-grey-wishlist-o"})),s.addToWishList=function(){if(!u)return sessionStorage.setItem("productPage.openWishListUbo","true"),n=window.location.pathname,void new t({redirectTo:n},i()).open(null,o);var n,o;sessionStorage.removeItem("productPage.openWishListUbo");var s=new e.uboAsyncContentModel;return s.header=a,s.contentViewModel=function(){},s.url="/PagesAsync/SaveToWishList/Product/"+r,e.uboService.openAsync(s)},i.addEventListener(document,"productAddedToWishList",(function(){c(!0)})),"true"===sessionStorage.getItem("productPage.openWishListUbo")&&(u?s.addToWishList():sessionStorage.removeItem("productPage.openWishListUbo"))}})),define("Layout/LayoutViewModel",["Components/ResponsiveNavigation/events","Layout/events","ksc-ubo","ksc-breakpoint-notifier","PageDependentComponents/MultiLevelNavigation/events","PageDependentComponents/SearchField/events"],(function(e,t,n,o,i,s){return function(r,a){var c=this;this.lockScrollOnBodySm=ko.observable(!1),this.lockScrollOnBodyXs=ko.observable(!1),this.lockScrollOnBody=ko.observable(!1),this.megaMobileNavOpen=ko.observable(!1);var u=ko.observable(!1),l=ko.observable(!1);c.disableScrolling=ko.pureComputed((function(){return u()&&c.lockScrollOnBodyXs()||l()&&c.lockScrollOnBodySm()||c.lockScrollOnBody()})),c.setPosition=ko.computed((function(){!c.disableScrolling()&&c.lastPosition&&(window.scrollTo(0,c.lastPosition),c.lastPosition=!1)})),a(e.responsiveMenuOpened).do((function(){$("body").addClass("fix-scrolling"),c.lockScrollOnBodySm(!0)})),a(e.responsiveMenuClosed).do((function(){$("body").removeClass("fix-scrolling"),c.lockScrollOnBodySm(!1)})),a(t.disableScrolling).do((function(e){c.lockScrollOnBody(e)})),a(t.megaMobileNavOpen).do((function(e){if(e)var t=$("body").scrollTop();c.megaMobileNavOpen(e),e||$("body").scrollTop(t)})),a(n.events.uboOpened).do((function(){c.lastPosition=window.scrollY,c.lockScrollOnBodyXs(!0)})),a(n.events.uboClosed).do((function(){c.lockScrollOnBodyXs(!1)})),a(s.searchIsOpen).do((function(e){c.lockScrollOnBodySm(e)})),a(o.events.isXs).do((function(e){u(e)})),a(o.events.isSm).do((function(e){l(e)})),a(i.multiLevelNavigationIsOpen).do((function(e){var t=$("body");if(e){var n=t.scrollTop();t.addClass("i-am-fixed-on-small-screens").css("margin-top","-"+n+"px")}else{var o=t.css("margin-top").replace("-","").replace("px","");t.removeClass("i-am-fixed-on-small-screens").css("margin-top","0").scrollTop(o)}}))}})),define("Components/QuantityPicker/QuantityPickerViewModel",["ksc-alert","Components/QuantityPicker/QuantityPickerEvents","ksc-ko-extenders"],(function(e,t){return function(n){var o=this,i=n.cartItemId,s=n.shoppingListId,r=n.shoppingListItemId,a=n.maxQuantity,c=n.cartPosition,u=n.isEol,l=n.resolvedStrings,d=n.quantityOrdered,p=n.hasOwnProperty("throttleDelay")?n.throttleDelay:500;o.productNumber=ko.observable(n.sku),o.numberOfProducts=ko.observable(n.quantityOrdered),o.isLoading=ko.observable(!1);var h=function(){return""===o.numberOfProducts()},f=function(){return o.numberOfProducts()>=a};o.numberOfProducts.subscribe((function(e){t.quantityChanged.publish(e,o.productNumber(),c,i,s,r)})),o.numberOfProducts.throttledSubscribe(p,(function(e){var t=parseInt(e,10);if(!(""===e)&&!(d===t))if(i=e,(n.isExtendedQuantityAllowed?/^[1-9]([0-9]{0,5})$/i:/^[1-9]([0-9]{0,2})$/i).test(i)){var i,s,r=Math.min(t,a);if(u&&o.numberOfProducts()>a&&o.addInfoAlert(l.eolMaxExceeded),r!==t&&o.numberOfProducts(r),s=t,!(d===a&&s>d))d=r}else o.numberOfProducts(d)})),o.increaseNumber=function(){o.isIncreaseButtonDisabled()?function(){if(f()){var e=u?l.eolMaxExceeded:l.maxSkuPrOrder;o.addInfoAlert(e)}}():o.numberOfProducts(parseInt(o.numberOfProducts(),10)+1)},o.decreaseNumber=function(){o.numberOfProducts()>1&&o.numberOfProducts(parseInt(o.numberOfProducts(),10)-1)},o.isDecreaseButtonDisabled=ko.computed((function(){return h()||o.numberOfProducts()<=1})),o.isIncreaseButtonDisabled=ko.computed((function(){return h()||f()})),o.resetNumberOfProducts=function(){var e=""===o.numberOfProducts()?d:o.numberOfProducts();o.numberOfProducts(e)},o.addInfoAlert=function(t){e.events.alertAdded.publish(t,"info")},o.clearNumberOfProducts=function(){o.numberOfProducts("")}}})),define("Pages/ProductPage/ProductPageBoxesViewModel",["PageDependentComponents/RichRelevance/events"],(function(e){return function(t,n){var o=this;o.hasRRContent=ko.observable(t.splitLeftSection),t.productReviews||n(e.recsLoaded).do((function(e){o.hasRRContent(e.length>0)}))}})),define("Components/Cms/Components/FilterButtonsCms/events",["komplett-pubsub"],(function(e){return e.extend({filterSelected:function(e,t){}})})),define("PagesAsync/TopListsCms/TopListsCmsViewModel",["Components/Cms/Components/FilterButtonsCms/events","ksc-alert"],(function(e,t){return function(n,o){var i=this;function s(e){i.lazyResults(e),i.isLoading(!1)}function r(e,n,o){var s=o.name||o;"string"==typeof o&&""===o.trim()&&(s=n),t.events.alertAdded.publish(s,"error"),i.isLoading(!1)}function a(e){!function(e,t){i.isLoading(!0),$.ajax({type:"GET",url:e,data:t,success:s,error:r,fail:r})}("/PagesAsync/TopListsCms/GetTopListItemsByFilter",{filter:e.filter,maxProducts:e.maxItems})}i.isLoading=ko.observable(!1),i.lazyResults=ko.observable(""),o(e.filterSelected).do((function(e,t){t===n.type&&a(e)}))}})),define("Components/ProductEnergyLogo/ProductEnergyLogoViewModel",["ksc-ubo"],(function(e){return function(t){var n=this;this.isVisible=!1,this.imageTitle=t.manufacturerName+" "+t.manufacturerPartNumber,this.technicalUboText=t.technicalUboText,this.energyDetailsUrl="",this.technicalContentModel=function(){this.openTechnicalUbo=n.openTechnicalUbo,this.technicalUboText=n.technicalUboText},t.energyDetailsUrl&&t.energyTechnicalUrl?(n.energyDetailsUrl=t.energyDetailsUrl,n.energyTechnicalUrl=t.energyTechnicalUrl,n.isVisible=!0):n.isVisible=!1,this.openUbo=function(t,o,i){var s=new e.uboSyncContentModel;return s.contentViewModel=n.technicalContentModel,s.content='<div class="product-energy"><a href="#" role="button" data-bind="click: openTechnicalUbo, text: technicalUboText">link</a><br><iframe src="'+n.energyDetailsUrl+'" frameborder="0" allowtransparency="true" scrolling="no" class="product-energy-logo-iframe"></iframe></div>',s.actionElement=o?o.currentTarget:i,s.uboClass="energy-ubo",e.uboService.openSync(s),!1},this.openTechnicalUbo=function(t,o,i){var s=new e.uboSyncContentModel;s.contentViewModel=n.technicalContentModel,s.actionElement=o?o.currentTarget:i,s.content='<div id="ccs-product-fiche"></div>',s.uboClass="technical-ubo",e.uboService.openSync(s);var r=document.createElement("script");return r.type="text/javascript",r.src=n.energyTechnicalUrl,r.onload=function(){var e=document.getElementById("ccs-product-fiche");if(window.MutationObserver){var t=new MutationObserver((function(n){n.forEach((function(){!function(e){function t(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}var n=t(e,"ubo-position-wrapper"),o=t(e,"ubo-box").getBoundingClientRect(),i=void 0===window.scrollY?window.pageYOffset:window.scrollY;o.top<0&&i-Math.abs(o.top)<0&&(n.style.top=o.bottom-o.top+"px")}(e),t.disconnect()}))}));t.observe(e,{childList:!0})}},document.querySelector(".technical-ubo").appendChild(r),!1}}})),define("Components/Cms/Components/Newsletter/CmsNewsletterViewModel",["ksc-ubo","JScript/Common/validator"],(function(e,t){return function(){var n=this;function o(e){e.isSuccess?n.isSubscribed(!0):t.mapErrors(e.errors,n.fields)}this.isSubscribed=ko.observable(!1),this.fields={email:t.observable("")},this.openInformation=function(){var t=new e.uboAsyncContentModel;return t.uboClass="wide-content",t.url="/cmsnewsletter/show-information",e.uboService.openAsync(t)},this.sendNewsletterSubscription=function(){$.ajax({type:"POST",url:"/cmsnewsletter/subscribe",data:t.unwrapValues(n.fields),success:o})}}})),define("Components/Cms/Components/BannerImage/BannerImageViewModel",["ksc-breakpoint-notifier","JScript/Common/gaPromotionService"],(function(e,t){return function(n,o){var i=this;i.isXs=!1;var s=function(){var e=i.isXs&&n.xsImage?n.xsImage.altText:n.lgImage.altText,t=i.isXs&&n.xsImage?n.xsImage.image:n.lgImage.image;return{id:n.link.url,name:e,creative:t.split("/").pop(),position:"BannerImage1"}};this.trackPromotionClick=function(){var e=s();return t.trackPromotionClick([e]),!0},o(e.events.isXs).do((function(e){var n;i.isXs=e,n=s(),t.trackImpression([n])}))}})),define("Components/Cms/Components/FilterButtonsCms/FilterButtonCmsViewModel",["ksc-breakpoint-notifier","Components/Cms/Components/FilterButtonsCms/events","JScript/Common/pushStateNavigationService","querystring"],(function(e,t,n,o){return function(i,s){var r,a=this,c=i.type;function u(e){!function(e){var t=o.parse(location.search.substring(1));"bestseller"===c?(!function(e,t){for(var n in t)0===n.indexOf(e)&&delete t[n]}("bestseller",t),t[c]=e.seoFriendlyName):t[c]=e.filter;n.replaceState("?"+o.stringify(t))}(e),t.filterSelected.publish(e,c)}a.filterButtons=ko.observableArray(),a.displayPopover=ko.observable(!1),a.isXs=ko.observable(),a.cleanupStyles=ko.observable(!0),a.selectedFilterButton=ko.observable(),a.selectedFilterName=ko.computed((function(){return a.selectedFilterButton()?a.selectedFilterButton().buttonName:""})),a.isRendered=ko.observable(!1),this.togglePopoverVisibility=function(){a.displayPopover(!a.displayPopover())},a.isSelectedFilterButton=function(e){return e===a.selectedFilterName()},a.setSelectedFilterButton=function(e){var t,n=function(e){if(!e)return;return i.filterButtons.filter((function(t){return t.filter===e||t.seoFriendlyName===e}))[0]}(e);return a.displayPopover(!1),a.selectedFilterButton(n),t=n.buttonName,"bestseller"===c&&(document.title=t+" - "+a.pageTitle),!1},a.getFilterButtonHref=function(e){return"?"+c+"="+e},s(e.events.isXs).do((function(e){a.isXs(e),a.cleanupStyles(!e),e&&a.displayPopover()&&a.displayPopover(!1)})),a.selectedFilterButton.subscribe((function(e){u(e)})),a.pageTitle=document.title,a.setSelectedFilterButton((r=o.parse(location.search.substring(1)),("bestseller"===c?function(e,t){for(var n in t)if(0===n.indexOf(e))return t[n]}("bestseller",r):r[c])||i.filterButtons[0].filter)),a.filterButtons(i.filterButtons),a.isRendered(!0)}})),define("Components/Cms/Components/Countdown/CountdownViewModel",[],(function(){function e(){location.reload(!0)}return function(t,n){var o=this;function i(){var e=function(e,t){var n=t-e,o=Math.floor(n/1e3),i=Math.floor(o/60),s=Math.floor(i/60),r=Math.floor(s/24);return{value:n,days:r,hours:s-24*r,minutes:i-60*s,seconds:o-60*i}}(Date.now(),o.targetDate),t=e.days,i=e.hours,s=e.minutes,r=e.seconds;if(e.value<=0)return n.clearInterval(o.intervalID),o.days("0"),o.hours("0"),o.minutes("0"),void o.seconds("0");0===t?o.daysVisible(!1):o.days(t.toString()),o.hours(i.toString()),o.minutes(s<10?"0"+s.toString():s.toString()),o.seconds(r<10?"0"+r.toString():r.toString())}o.targetDate=new Date(t.eventDate),o.timeWords=t.timeWords,o.days=ko.observable("0"),o.hours=ko.observable("0"),o.minutes=ko.observable("0"),o.seconds=ko.observable("0"),o.daysVisible=ko.observable(!0),o.daysWord=ko.computed((function(){return"1"===o.days()?o.timeWords.day:o.timeWords.days})),o.hoursWord=ko.computed((function(){return"1"===o.hours()?o.timeWords.hour:o.timeWords.hours})),o.minutesWord=ko.computed((function(){return"01"===o.minutes()?o.timeWords.minute:o.timeWords.minutes})),o.secondsWord=ko.computed((function(){return"01"===o.seconds()?o.timeWords.second:o.timeWords.seconds})),i(),o.intervalID=n.setInterval(i,1e3);var s=o.targetDate-new Date;s>0&&s<=2147483647&&n.setTimeout(e,s)}})),define("Components/Cms/Components/BannerCarousel/BannerCarouselViewModel",["ksc-breakpoint-notifier","JScript/Common/gaPromotionService"],(function(e,t){return function(n,o){var i=this;i.isXs=!1,this.autoPlay=ko.observable(n&&n.rotationSpeed>0);var s=[];function r(e,t){t=parseInt(t);var n=i.isXs&&e.xsImage?e.xsImage.altText:e.lgImage.altText,o=i.isXs&&e.xsImage?e.xsImage.image:e.lgImage.image;return t+=1,{id:e.link.url,name:n,creative:o.split("/").pop(),position:"BannerCarousel"+t}}this.trackPromotionClick=function(e){var o=n.images[e];if(o){var i=r(o,e);t.trackPromotionClick([i])}return!0},this.toggleAutoPlay=function(){i.autoPlay(!i.autoPlay())},this.onSlideChanged=function(e){!function(e){var o=n.images[e];if(o){for(var i=0;i<s.length;i++)if(s[i]===e)return;s.push(e),t.trackImpression([r(o,e)])}}(e)},o(e.events.isXs).do((function(e){i.isXs=e}))}})),define("Components/Cms/CmsPageRowViewModel",["Components/Cms/Components/FilterButtonsCms/events","Components/Cms/Components/IconFilterButtons/events"],(function(e,t){return function(n,o){var i=this,s=n.rowTag;i.rowVisible=ko.observable(n.isRowVisible),o(e.filterSelected).do((function(e,t){t===n.type&&i.rowVisible(""===s||s===e.filter||"*"===e.filter)})),o(t.filterSelected).do((function(e,t){t===n.type&&i.rowVisible(""===s||s===e.filter||"*"===e.filter)}))}})),define("Components/SmallCart/ViewModel",["JScript/ShoppingCart/events","Components/SmallCart/SmallCartSummaryService","JScript/Common/cookieReader","NumericStringFormat"],(function(e,t,n,o){return function(i,s){var r,a=this,c=n.getBase64CookieAsObject("SmallCart")||{},u=i||{},l=c.hasOwnProperty("isGross"),d=function(e){return e>0?"fa-colored-shopping-bag-red":"fa-darkgrey-shopping-bag"};this.isGross=ko.observable(c.isGross),this.priceTotalGross=ko.observable(c.subtotalGross||""),this.priceTotal=ko.observable(c.subtotal||""),this.productsQuantity=ko.observable(c.productQuantity||0),this.animateCounter=ko.observable(!1),this.cartIcon=ko.observable(d(a.productsQuantity())),this.priceTotalComputed=ko.computed((function(){return a.isGross()?a.priceTotalGross():a.priceTotal()})),this.updateCookie=function(e){var t={addToCartNotificationEnabled:u.addToCartNotificationEnabled,isGross:e.isGross,subtotal:e.priceTotal,subtotalGross:e.priceTotalGross,productQuantity:e.productsQuantity},o=new Date;o.setTime(o.getTime()+36e5),n.setBase64CookieFromObject("SmallCart",t,o)},this.updateData=function(e){a.isGross(e.isGross),a.priceTotal(e.priceTotal),a.priceTotalGross(e.priceTotalGross),a.productsQuantity(e.productsQuantity),a.updateCookie(e),a.cartIcon(d(a.productsQuantity()))},l?t.getSummaryOnBackNavigation().then((function(e){a.updateData(e)}),(function(){})):t.getSummary().then((function(e){a.updateData(e)})),s.addEventListener(document,"cartUpdated",(function(e){if(e.detail){var t=e.detail,n={isGross:t.isGross,priceTotal:t.totalNet,priceTotalGross:t.totalGross,productsQuantity:t.quantity};a.updateData(n),a.animateCounter(!0),window.clearTimeout(r),r=s.setTimeout((function(){a.animateCounter(!1)}),100)}}),!1),s(e.cartUpdated).do((function(e){var t={isGross:e.isGross,priceTotal:e.subtotal,priceTotalGross:e.subtotalGross,productsQuantity:e.quantity};a.updateData(t),u.addToCartNotificationEnabled&&(a.animateCounter(!0),window.clearTimeout(r),r=s.setTimeout((function(){a.animateCounter(!1)}),1e3))})),s(e.cartCleared).do((function(){var e={isGross:a.isGross(),priceTotal:o.toCurrencyString(0,u.countryCode,2),priceTotalGross:o.toCurrencyString(0,u.countryCode,2),productsQuantity:0};a.updateData(e)}))}})),define("Components/NavigationMenu/ToggleResponsiveNavigationViewModel",["Components/ResponsiveNavigation/events","knockout","JScript/Common/cookieService","ksc-interaction-tracking"],(function(e,t,n,o){return function(i,s){var r=this;r.isMenuOpened=t.observable(!1),this.setMenuStateOpen=function(e){e?n.set("ShowVerticalMenu","1"):n.remove("ShowVerticalMenu"),r.isMenuOpened(e)},this.openMenu=function(){o.trackFullInteraction("Filters","open filter","open filter",1),"VerticalMenu"===i.menuType?e.verticalMenuOpened.publish():e.departmentMenuOpened.publish()},s(e.responsiveMenuClosed).do((function(){r.setMenuStateOpen(!1)})),s(e.responsiveMenuOpened).do((function(){r.setMenuStateOpen(!0)}))}})),define("Components/NavigationHeader/MultiLevelNavigationOverlayViewModel",["PageDependentComponents/MultiLevelNavigation/events"],(function(e){return function(t,n){var o=this;this.isVisible=ko.observable(!1),this.throttledIsVisible=ko.computed(o.isVisible).extend({throttle:5}),this.throttledIsHidden=ko.computed(o.isVisible).extend({throttle:1e3}),n(e.multiLevelNavigationIsOpen).do((function(e){o.isVisible(e)}))}})),define("Components/NavigationHeader/NavigationHeaderViewModel",["ksc-breakpoint-notifier","Components/NavigationHeader/events","JScript/ShoppingCart/events","ksc-alert","JScript/Common/requestContext"],(function(e,t,n,o,i){return function(t,s){var r,a=this,c=!1;function u(e){return c&&(e.headerHeight="auto"),e}this.user=i,this.itemJustAddedToCart=ko.observable(),this.scrollInfo=ko.observable({direction:"down",navigationHeadIsOutOfView:!1,headerHeight:"auto"}),this.scrollInfo.subscribe((function(e){o.events.toggleWrapperCss.publish("header-offset","up"===e.direction)})),s(n.cartUpdated).do((function(){if(t.addtoCartNotificationEnabled){a.itemJustAddedToCart(!0);var e=a.scrollInfo();e.direction="up",e=u(e),a.scrollInfo(e),s.clearTimeout(r),r=s.setTimeout((function(){a.itemJustAddedToCart(!1)}),2500)}})),s(e.events.isLg).do((function(e){c=e,a.scrollInfo(u(a.scrollInfo()))}))}})),define("Components/MobileMenu/MobileMenuViewModel",["PagesAsync/Login/LoginResponsiveViewModel","Components/NavigationHeader/events","JScript/Common/requestContext"],(function(e,t,n){return function(o,i){var s=this;this.displayPopover=ko.observable(!1),this.ariaExpanded=ko.computed((function(){return s.displayPopover().toString()})),this.loginTitle="",this.accountLink="",this.user=n,this.button=!1,this.togglePopoverVisibility=function(){s.displayPopover(!s.displayPopover())},this.togglePopoverVisibilityTouch=function(e,t){t.stopPropagation(),"BUTTON"===t.target.tagName?t.target.focus():t.target.parentNode.focus(),s.displayPopover(!s.displayPopover())},this.login=function(t,n,o,r){var a={title:s.loginTitle,redirectTo:r?s.accountLink:null},c=new e(a,i());return this.togglePopoverVisibility(),c.open(t,n,o)},this.loginMyPage=function(e,t,n){s.login(e,t,n,!0)},i(t.hidden).do((function(){s.displayPopover(!1)})),s.accountLink=o.accountLink,s.loginTitle=o.loginTitle}})),define("Components/LoginButton/AccountDropdownViewModel",["Components/LoginButton/events"],(function(e){return function(t,n){var o=this;o.showAccountDropdown=ko.observable(!1),o.hasFocusOnDropdownElements=ko.observable(!1),o.ariaExpanded=ko.computed((function(){return o.showAccountDropdown().toString()})),ko.computed((function(){o.hasFocusOnDropdownElements()||o.showAccountDropdown(!1)})).extend({throttle:50}),o.toggleAccountDropdown=function(){o.showAccountDropdown(!o.showAccountDropdown())},o.crmLogOut=function(){return e.crmLoggedOut.publish(),!0},o.userLogout=function(){return e.userLogout.publish(),!0},n(e.focusChanged).do((function(e){o.hasFocusOnDropdownElements(e)}))}})),define("Components/BuyButton/BuyButtonViewModel",["ksc-ubo","Components/QuantityPicker/QuantityPickerEvents","JScript/ShoppingCart/events","ksc-alert","Components/BuyButton/AddToCartNotificationViewModel","Components/BuyButton/buyButtonEvents"],(function(e,t,n,o,i,s){return function(r,a){var c=this;this.numberOfProducts=ko.observable(1),this.isLoading=ko.observable(!1),this.sku=r.sku,this.price=r.price,this.showQuantityLimitItemInCartButton=ko.observable(!1),this.showNormalButton=ko.computed((function(){return!c.showQuantityLimitItemInCartButton()})),this.addToCart=new i(r,c.numberOfProducts),this.addToCartNotification=function(){return c.addToCart.addToCartNotification()},this.addProductLink=ko.pureComputed((function(){return"/cart/AddProductToCartAsync?productId="+r.sku+"&quantity="+c.numberOfProducts()}),this),this.tryToBuy=function(e,t){c.isLoading(!0);var n=$.Deferred();return fetch("/PagesAsync/QuantityPurchaseLimit/ValidateOrder/"+r.sku).then((function(e){return e.ok?e.json():{Data:void 0}})).then((function(i){null!=i.Data&&i.Data.IsSuccess?i.Data.Response.Result.IsValid?(r.addToCartNotificationEnabled?c.addToCart.addToCartNotification():c.doRedirect(c.addProductLink()),n.resolve(!0)):r.addToCartNotificationEnabled&&i.Data.Response.Result.CollidingProductSku===r.sku?(c.isLoading(!1),c.showQuantityLimitItemInCartButton(!0)):(c.openUbo(e,t),n.resolve(!1)):(o.events.alertAdded.publish(i.Data.Message,"error"),c.isLoading(!1))})),n.promise()},this.openUbo=function(t,n){var o=new e.uboAsyncContentModel;return o.header=r.header,o.url="/PagesAsync/QuantityPurchaseLimit/Show/"+r.sku+"?buyButtonPlacementId="+r.buyButtonPlacementId,o.actionElement=n.currentTarget,e.uboService.openAsync(o)},this.doRedirect=function(e){location.href=e},a(t.quantityChanged).do((function(e,t){t==r.sku&&c.numberOfProducts(e)})),a(e.events.uboOpened).do((function(){c.isLoading(!1)})),a(s.quantityPurchaseLimitKeepCurrentState).do((function(e){r.addToCartNotificationEnabled&&r.buyButtonPlacementId==e&&c.addToCart.productKeptInCartNotification()})),a(s.quantityPurchaseLimitReplaceProduct).do((function(e){r.buyButtonPlacementId==e.buyButtonPlacementId&&(c.isLoading(!0),c.addToCart.replaceProductInCartNotification(e).then((function(){c.isLoading(!1)})))})),a(n.cartUpdated).do((function(){c.isLoading(!1)}))}})),define("ksc-alert/custombindings",["knockout"],(function(e){e.bindingHandlers.kscAlertSticky={init:function(t,n){var o=e.unwrap(n()).isOutOfView,i=t.offsetTop;e.isObservable(o)&&window.addEventListener("scroll",(function(){setTimeout((function(){var e=window.pageYOffset,t=o();e>=i?t||o(!0):t&&o(!1)}),20)}))}}})),define("bower_components/ksc-alert/dist/js/custombindings",["knockout"],(function(e){e.bindingHandlers.kscAlertSticky={init:function(t,n){var o=e.unwrap(n()).isOutOfView,i=t.offsetTop;e.isObservable(o)&&window.addEventListener("scroll",(function(){setTimeout((function(){var e=window.pageYOffset,t=o();e>=i?t||o(!0):t&&o(!1)}),20)}))}}}));
//# sourceMappingURL=viewModels-bundle.js.map
